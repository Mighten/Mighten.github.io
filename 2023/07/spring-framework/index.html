
<!DOCTYPE html>
<html
  lang="en"
  data-figures=""
  
    class="page"
  
  
    data-mode="lit"
  
  >
  <head>
<title>Spring Framework | Mighten&#39;s Blog</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<script async defer 
  src='https://static.cloudflareinsights.com/beacon.min.js' 
  data-cf-beacon='{"token": "62fc18fe335449eebd1bdd0273a4d051" }'>
</script>


<meta property="og:locale" content="en" />

<meta property="og:type" content="article">
<meta name="description" content="Spring Framework" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:creator" content="">
<meta name="twitter:title" content="Spring Framework" />
<meta name="twitter:image" content="https://mighten.github.io/assets/img/thumbnail.png"/>
<meta property="og:url" content="https://mighten.github.io/2023/07/spring-framework/" />
<meta property="og:title" content="Spring Framework" />
<meta property="og:description" content="Spring Framework" />
<meta property="og:image" content="https://mighten.github.io/assets/img/thumbnail.png" />


<link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
<link rel="manifest" href="/favicon/site.webmanifest">
<link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="/favicon/favicon.ico">
<link rel="canonical" href="https://mighten.github.io/2023/07/spring-framework/">











<link rel="preload" href="https://mighten.github.io/css/styles.72b41e6b5df8f2f781e1de22fa7cc43b66e1ad2c55d5cf57d579f8a69f71a6f65e6012daf718ea86c35a5ace56bd6364e8258139cfe5fb551449616495939934.css" integrity = "sha512-crQea1348veB4d4i&#43;nzEO2bhrSxV1c9X1Xn4pp9xpvZeYBLa9xjqhsNaWs5WvWNk6CWBOc/l&#43;1UUSWFklZOZNA==" as="style" crossorigin="anonymous">



<link rel="preload" href="https://mighten.github.io/en/js/bundle.bc7fa972211f82bdf996eb19048c902c5fa501892da0cb0c8236be2734482683795affb35d23b3cc109af926b38f8de5f7797aacce4e5073b6a802f47f5dea8e.js" as="script" integrity=
"sha512-vH&#43;pciEfgr35lusZBIyQLF&#43;lAYktoMsMgja&#43;JzRIJoN5Wv&#43;zXSOzzBCa&#43;Sazj43l93l6rM5OUHO2qAL0f13qjg==" crossorigin="anonymous">


<link rel="stylesheet" type="text/css" href="https://mighten.github.io/css/styles.72b41e6b5df8f2f781e1de22fa7cc43b66e1ad2c55d5cf57d579f8a69f71a6f65e6012daf718ea86c35a5ace56bd6364e8258139cfe5fb551449616495939934.css" integrity="sha512-crQea1348veB4d4i&#43;nzEO2bhrSxV1c9X1Xn4pp9xpvZeYBLa9xjqhsNaWs5WvWNk6CWBOc/l&#43;1UUSWFklZOZNA==" crossorigin="anonymous">
<link rel="stylesheet" href="/css/figcaption-container.css">
  </head>
  <body
    data-code="100"
    data-lines="true"
    id="documentTop"
    data-lang="en"
  >

<header class="nav_header" >
  <nav class="nav"><a href='https://mighten.github.io/' class="nav_brand nav_item" title="Mighten&#39;s Blog">
  <img src="https://mighten.github.io/favicon/logo.png" class="logo" alt="Mighten&#39;s Blog">
  <div class="nav_close">
    <div><svg class="icon">
  <title>open-menu</title>
  <use xlink:href="#open-menu"></use>
</svg>
<svg class="icon">
  <title>closeme</title>
  <use xlink:href="#closeme"></use>
</svg>
</div>
  </div>
</a>

    <div class='nav_body nav_body_left'>
      
      
      
        

  <div class="nav_parent">
    <a href="https://mighten.github.io/" class="nav_item" title="Home">Home </a>
  </div>
  <div class="nav_parent">
    <a href="https://mighten.github.io/about/" class="nav_item" title="About">About </a>
  </div>
      
<div class='follow'>
    
  <a href="https://mighten.github.io/index.xml">
    <svg class="icon">
  <title>rss</title>
  <use xlink:href="#rss"></use>
</svg>

  </a>
<div class="color_mode">
  <input type="checkbox" class="color_choice" id="mode">
</div>

</div>

    </div>
  </nav>
</header>

    <main>
  
<div class="grid-inverse wrap content">
  <article class="post_content">
    <h1 class="post_title">Spring Framework</h1>
  <div class="post_meta">
    <span><svg class="icon">
  <title>calendar</title>
  <use xlink:href="#calendar"></use>
</svg>
</span>
    <span class="post_date">
      2023-07-19</span>
    <span class="post_time"> · 44 min read</span><span>&nbsp;· <a href='https://mighten.github.io/tags/java/' title="Java" class="post_tag button button_translucent">Java
        </a><a href='https://mighten.github.io/tags/spring/' title="Spring" class="post_tag button button_translucent">Spring
        </a>
    </span>
  </div>

    <div class="post_body"><p>Hi there!</p>
<p>In this blog, we talk about <em><strong>Spring Framework</strong></em>, a Java platform that provides comprehensive infrastructure support for developing Java applications. The content of this blog is shown below:</p>
<ul>
<li>Architecture</li>
<li><em>Spring IoC Container</em></li>
<li>Spring Beans</li>
<li><em>Dependency Injection (DI)</em></li>
<li>Spring Annotations</li>
<li><em>Aspect Oriented Programming (AOP)</em></li>
</ul>
<h1 id="1-architecture">1. ARCHITECTURE</h1>
<p>The Spring Framework provides about 20 modules which can be used based on an application requirement.</p>
<p><figure>
  <picture>

    
      
        
        
        
        
        
        
    <div class="figcaption-container">
      <img
        loading="lazy"
        decoding="async"
        alt="Figure 1. Spring Framework Architecture"
        
          class="image_figure image_internal image_unprocessed"
          src="/assets/img/post/2023-07/spring-framework/spring-framework-architecture.svg"
        
        
      />

      </div>
  </picture>
</figure>
</p>
<p><strong>Test</strong> layer supports the testing of Spring components with <em>JUnit</em> or <em>TestNG</em> frameworks.</p>
<p><strong>Core Container</strong> layer consists of the <em>Core</em>, <em>Beans</em>, <em>Context</em>, and <em>Spring Expression Language</em> (<em>SpEL</em>) modules：</p>
<ul>
<li><strong>Core</strong> provides the fundamental parts of the framework, including the <em>Inversion of Control</em> (<em>IoC</em>) and Dependency Injection (DI).</li>
<li><strong>Bean</strong> provides <code>BeanFactory</code>, an implementation of the <em>factory pattern</em>.</li>
<li><strong>Context</strong> is a medium to access any objects defined and configured, e.g., the <code>ApplicationContext</code> <em>interface</em>.</li>
<li><strong>SpEL</strong> provides <em>Spring Expression Language</em> for querying and manipulating an <em>object graph</em> at <em>runtime</em>.</li>
</ul>
<p><strong>AOP</strong> layer provides an <em>aspect-oriented programming</em> implementation, allowing you to define <em>method-interceptors</em> and <em>pointcuts</em> to <em>decouple</em> the code.</p>
<p><strong>Aspects</strong> layer provides integration with <em>AspectJ</em>, an AOP framework.</p>
<p><strong>Instrumentation</strong> layer provides <em>class instrumentation support</em> and <em>class loader</em> implementations.</p>
<p><strong>Messaging</strong> layer provides support for <em>STOMP</em> as the <em>WebSocket sub-protocol</em>.</p>
<p><strong>Data Access/Integration</strong> layer consists of <em>JDBC</em>, <em>ORM</em>, <em>OXM</em>, <em>JMS</em> and <em>Transaction</em>:</p>
<ul>
<li><strong>JDBC</strong> provides a <em>JDBC-abstraction layer</em> to simplify JDBC related coding.</li>
<li><strong>ORM</strong> provides <em>integration layers</em> for <em>object-relational mapping</em> APIs, including JPA, JDO, Hibernate, and iBatis.</li>
<li><strong>OXM</strong> provides an <em>abstraction layer</em> that supports <em>Object/XML mapping</em> implementations for <em>JAXB</em>, <em>Castor</em>, <em>XMLBeans</em>, <em>JiBX</em> and <em>XStream</em>.</li>
<li><strong>Java Messaging Service</strong> (<em>JMS</em>) <em>produces</em> and <em>consumes</em> messages.</li>
<li><strong>Transaction</strong> supports <em>programmatic and declarative transaction management</em> for classes that implement special interfaces and for all your <em>POJOs</em>.</li>
</ul>
<p><strong>Web</strong> layer consists of the <em>Web</em>, <em>MVC</em>, <em>WebSocket</em>, and <em>Portlet</em>:</p>
<ul>
<li><strong>MVC</strong> provides <em>Model-View-Controller</em> (MVC) implementation for Spring web applications.</li>
<li><strong>WebSocket</strong> provides support for <em>WebSocket-based</em>, <em>two-way communication</em> between the client and the server in web applications.</li>
<li><strong>Web</strong> provides basic <em>web-oriented integration</em> features such as <em>multipart file-upload</em> functionality and the initialization of the <em>IoC container</em> using servlet listeners and a web-oriented application context.</li>
<li><strong>Portlet</strong> provides the MVC implementation to be used in a portlet environment and mirrors the functionality of Web-Servlet module.</li>
</ul>
<h1 id="2-ioc-container">2. IOC CONTAINER</h1>
<p><strong>Inversion of Control</strong> (<strong>IoC</strong>) is a <em>design principle</em> where the control of flow and dependencies in a program are inverted, meaning that the control is handed over to a container or framework which can manage dependencies (instead of allowing component to control its dependencies).</p>
<p><strong>Dependency</strong> refers to an object that a class relies on to perform its functionality. <strong>Dependency Injection</strong> (<strong>DI</strong>) is a specific implementation of the <em>IoC principle</em>. <em>DI</em> injects the dependencies from outside the class (rather than having the class create them itself). Instead of hardcoding within the class, the dependencies are <em>injected</em> into it from an external source, usually a container or framework.</p>
<p>In Spring Framework, there are two types of IoC containers: <code>BeanFactory</code> and <code>ApplicationContext</code>. The <code>ApplicationContext</code> container includes all functionality of the <code>BeanFactory</code> container and thus is better; while <code>BeanFactory</code> is mostly used for lightweight applications where data volume and speed is significant.</p>
<h2 id="21-beanfactory">2.1 <code>BeanFactory</code></h2>
<p><code>BeanFactory</code> is the simplest container providing the basic support for <em>DI</em>. <code>BeanFactory</code> is defined by the <code>org.springframework.beans.factory.BeanFactory</code> interface.</p>
<p><em>Code 1-1</em> shows how to use <code>BeanFactory</code>:</p>
<p><em>Code 1-1(a). &quot;Message.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Message</span> <span class="o">{</span> 
<span class="ln"> 4</span>   <span class="kd">private</span> <span class="n">String</span> <span class="n">message</span><span class="o">;</span>  
<span class="ln"> 5</span>   
<span class="ln"> 6</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">){</span> 
<span class="ln"> 7</span>      <span class="k">this</span><span class="o">.</span><span class="na">message</span>  <span class="o">=</span> <span class="n">message</span><span class="o">;</span> 
<span class="ln"> 8</span>   <span class="o">}</span>  
<span class="ln"> 9</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">getMessage</span><span class="o">(){</span> 
<span class="ln">10</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Message : &#34;</span> <span class="o">+</span> <span class="n">message</span><span class="o">);</span> 
<span class="ln">11</span>   <span class="o">}</span> 
<span class="ln">12</span><span class="o">}</span>
</code></pre></div><p><em>Code 1-1(a)</em> declares a class named <code>Message</code>, and it has a pair of getter/setter for class member named <code>message</code>.</p>
<p><em>Code 1-1(b). &quot;Beans.xml&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="ln"> 1</span><span class="cp">&lt;?xml version = &#34;1.0&#34; encoding = &#34;UTF-8&#34;?&gt;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="nt">&lt;beans</span> <span class="na">xmlns =</span> <span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
<span class="ln"> 4</span>   <span class="na">xmlns:xsi =</span> <span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
<span class="ln"> 5</span>   <span class="na">xsi:schemaLocation =</span> <span class="s">&#34;http://www.springframework.org/schema/beans
</span><span class="ln"> 6</span><span class="s">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&#34;</span><span class="nt">&gt;</span>
<span class="ln"> 7</span>
<span class="ln"> 8</span>   <span class="nt">&lt;bean</span> <span class="na">id =</span> <span class="s">&#34;demo&#34;</span> <span class="na">class =</span> <span class="s">&#34;com.example.Message&#34;</span><span class="nt">&gt;</span>
<span class="ln"> 9</span>      <span class="nt">&lt;property</span> <span class="na">name =</span> <span class="s">&#34;message&#34;</span> <span class="na">value =</span> <span class="s">&#34;Hello World!&#34;</span><span class="nt">/&gt;</span>
<span class="ln">10</span>   <span class="nt">&lt;/bean&gt;</span>
<span class="ln">11</span>
<span class="ln">12</span><span class="nt">&lt;/beans&gt;</span>
</code></pre></div><p><em>Code 1-1(b)</em> is a XML configuration file tell that a bean called <code>demo</code> is defined, and its <code>message</code> is set to &quot;Hello World!&quot;.</p>
<p><em>Code 1-1(c). &quot;BeanFactoryDemoTest.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.beans.factory.xml.XmlBeanFactory</span><span class="o">;</span> 
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">org.springframework.core.io.ClassPathResource</span><span class="o">;</span>  
<span class="ln"> 5</span>
<span class="ln"> 6</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BeanFactoryDemoTest</span> <span class="o">{</span> 
<span class="ln"> 7</span>   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span> 
<span class="ln"> 8</span>      <span class="n">XmlBeanFactory</span> <span class="n">factory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">XmlBeanFactory</span> <span class="o">(</span><span class="k">new</span> <span class="n">ClassPathResource</span><span class="o">(</span><span class="s">&#34;Beans.xml&#34;</span><span class="o">));</span> 
<span class="ln"> 9</span>      <span class="n">Message</span> <span class="n">obj</span> <span class="o">=</span> <span class="o">(</span><span class="n">Message</span><span class="o">)</span> <span class="n">factory</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;demo&#34;</span><span class="o">);</span>    
<span class="ln">10</span>      <span class="n">obj</span><span class="o">.</span><span class="na">getMessage</span><span class="o">();</span>    
<span class="ln">11</span>   <span class="o">}</span>
<span class="ln">12</span><span class="o">}</span>   
</code></pre></div><p><em>Code 1-1(c)</em> is a test program, and it uses <code>ClassPathResource()</code> API to load the bean configuration file, and it uses <code>XmlBeanFactory()</code> to create and initialize beans in the configuration file &quot;Beans.xml&quot;.</p>
<p>Then, <code>getBean()</code> method uses bean ID (&quot;demo&quot;) to return a generic object, which finally can be casted to the <code>BeanFactoryDemo</code> object. By invoking <code>obj.getMessage()</code>, the <em>code 1-1(a)</em> is executed, and shows:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="ln">1</span>Message : Hello World!
</code></pre></div><p><em>Summary</em>: this section uses <em>Code 1-1(a, b, c)</em> to show how to get bean by using <code>BeanFactory</code>.</p>
<h2 id="22-applicationcontext">2.2 <code>ApplicationContext</code></h2>
<p><code>ApplicationContext</code> is similar to <em>BeanFactory</em>, but it adds <em>enterprise-specific</em> functionality.</p>
<p><code>ApplicationContext</code> is defined by the <code>org.springframework.context.ApplicationContext</code> interface, with several implementations: <code>FileSystemXmlApplicationContext</code>, <code>ClassPathXmlApplicationContext</code>, and <code>WebXmlApplicationContext</code>.</p>
<ul>
<li><code>FileSystemXmlApplicationContext</code> loads the definitions of the beans, from the XML bean configuration file (full path to file) to the constructor.</li>
<li><code>ClassPathXmlApplicationContext</code> loads the definitions of the beans from an XML file, and we need to set <code>CLASSPATH</code>.</li>
<li><code>WebXmlApplicationContext</code> loads the XML file with definitions of all beans from within a web application.</li>
</ul>
<p><em>Code 2-1</em>, with <em>Code 1-1(a, b)</em>, will show how to use <code>FileSystemXmlApplicationContext</code> of <code>ApplicationContext</code>:</p>
<p><em>Code 2-1. &quot;FileSystemXmlApplicationContextDemoTest.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.context.ApplicationContext</span><span class="o">;</span>
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">org.springframework.context.support.FileSystemXmlApplicationContext</span><span class="o">;</span>
<span class="ln"> 5</span>
<span class="ln"> 6</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileSystemXmlApplicationContextDemoTest</span> <span class="o">{</span>
<span class="ln"> 7</span>   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 8</span>      <span class="n">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileSystemXmlApplicationContext</span>
<span class="ln"> 9</span>         <span class="o">(</span><span class="s">&#34;C:/path/to/Beans.xml&#34;</span><span class="o">);</span>
<span class="ln">10</span>
<span class="ln">11</span>      <span class="n">Message</span> <span class="n">obj</span> <span class="o">=</span> <span class="o">(</span><span class="n">Message</span><span class="o">)</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;demo&#34;</span><span class="o">);</span>
<span class="ln">12</span>      <span class="n">obj</span><span class="o">.</span><span class="na">getMessage</span><span class="o">();</span>
<span class="ln">13</span>   <span class="o">}</span>
<span class="ln">14</span><span class="o">}</span>
</code></pre></div><p>Now we will reuse the codes defined in <em>Code 1-1(a, b)</em>, and run the <em>Code 2-1</em>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="ln">1</span>Message : Hello World!
</code></pre></div><p><em>Summary</em>: this section uses <em>Code 1-1(a, b)</em>, <em>Code 2-1</em> to show how to get bean by using <code>ApplicationContext</code>, especially the <code>FileSystemXmlApplicationContext</code>.</p>
<h1 id="3-bean">3. BEAN</h1>
<p><strong>Bean</strong> is an object that is instantiated, assembled, and otherwise managed by a Spring IoC container. <em>Bean</em> definition contains the information called configuration <em>metadata</em>:</p>
<p><em>Table 3-1. Properties of Bean</em></p>
<table>
<thead>
<tr>
<th>Properties</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>the bean identifier(unique)</td>
</tr>
<tr>
<td><code>class</code></td>
<td>the bean class to create the bean</td>
</tr>
<tr>
<td><code>scope</code></td>
<td>the scope of the objects created</td>
</tr>
<tr>
<td><code>constructor-arg</code></td>
<td>to inject the dependencies</td>
</tr>
<tr>
<td><code>properties</code></td>
<td>to inject the dependencies</td>
</tr>
<tr>
<td><code>autowiring</code></td>
<td>to inject the dependencies</td>
</tr>
<tr>
<td><code>lazy-init</code></td>
<td>let IoC container to create a bean instance at first requested</td>
</tr>
<tr>
<td><code>init-method</code></td>
<td>executed after properties set by the container</td>
</tr>
<tr>
<td><code>destroy-method</code></td>
<td>executed when the container is destroyed</td>
</tr>
</tbody>
</table>
<h2 id="31-scope">3.1 Scope</h2>
<p>The <strong>scope</strong> of a bean defines the <em>life cycle</em> and <em>visibility</em> of that bean in the contexts we use it (singleton, prototype, request, session, global-session). In pratice, we mainly use <em>singleton</em>, <em>prototype</em>:</p>
<p><strong>singleton</strong>: Spring IoC container creates <em>exactly one</em> instance of the object defined by that bean definition. Shown in Code 3-1, if we execute <code>getBean(&quot;demo&quot;)</code> multiple times, the object will always be the same one.</p>
<p><em>Code 3-1. Snippet of &quot;bean.xml&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="ln">1</span><span class="nt">&lt;bean</span> <span class="na">id =</span> <span class="s">&#34;demo&#34;</span> 
<span class="ln">2</span>      <span class="na">class =</span> <span class="s">&#34;com.example.Message&#34;</span>
<span class="ln">3</span>      <span class="na">scope =</span> <span class="s">&#34;singleton&#34;</span><span class="nt">&gt;</span>
<span class="ln">4</span><span class="nt">&lt;/bean&gt;</span>
</code></pre></div><p><strong>prototype</strong>: Spring IoC container creates a <em>new</em> bean instance of the object every time a request for that specific bean is made. Shown in Code 3-2, if we execute <code>getBean(&quot;demo&quot;)</code> multiple times, there will be corresponsing multiple quite different objects.</p>
<p><em>Code 3-2. Snippet of &quot;bean.xml&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="ln">1</span><span class="nt">&lt;bean</span> <span class="na">id =</span> <span class="s">&#34;demo&#34;</span> 
<span class="ln">2</span>      <span class="na">class =</span> <span class="s">&#34;com.example.Message&#34;</span>
<span class="ln">3</span>      <span class="na">scope =</span> <span class="s">&#34;prototype&#34;</span><span class="nt">&gt;</span>
<span class="ln">4</span><span class="nt">&lt;/bean&gt;</span>
</code></pre></div><h2 id="32-life-cycle">3.2 Life Cycle</h2>
<p><em>Bean life cycle</em> is managed by the <em>Spring container</em>. The spring container gets started before creating the instance of a bean as per the request, and then dependencies are injected. And finally, the bean is <em>destroyed</em> when the spring container is closed.</p>
<p><em>Code 3-3(a). &quot;LifeCycleDemo.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LifeCycleDemo</span> <span class="o">{</span>
<span class="ln"> 4</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="o">{</span>
<span class="ln"> 5</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Bean initialized.&#34;</span><span class="o">);</span>
<span class="ln"> 6</span>   <span class="o">}</span>
<span class="ln"> 7</span>
<span class="ln"> 8</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span>
<span class="ln"> 9</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;foo&#34;</span><span class="o">);</span>
<span class="ln">10</span>   <span class="o">}</span>
<span class="ln">11</span>
<span class="ln">12</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">destroy</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">13</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Bean destroyed.&#34;</span><span class="o">);</span>
<span class="ln">14</span>   <span class="o">}</span>
<span class="ln">15</span><span class="o">}</span>
</code></pre></div><p>In <em>Code 3-3(a)</em>, a straightforward class named <code>LifeCycleDemo</code> is defined, comprising three methods: <code>init()</code>, <code>foo()</code>, and <code>destroy()</code>. Each of these methods prints out status information to indicate its current stage.</p>
<p><em>Code 3-3(b). &quot;beans.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="ln"> 1</span><span class="cp">&lt;?xml version = &#34;1.0&#34; encoding = &#34;UTF-8&#34;?&gt;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="nt">&lt;beans</span> <span class="na">xmlns =</span> <span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
<span class="ln"> 4</span>   <span class="na">xmlns:xsi =</span> <span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
<span class="ln"> 5</span>   <span class="na">xsi:schemaLocation =</span> <span class="s">&#34;http://www.springframework.org/schema/beans
</span><span class="ln"> 6</span><span class="s">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&#34;</span><span class="nt">&gt;</span>
<span class="ln"> 7</span>
<span class="ln"> 8</span>   <span class="nt">&lt;bean</span> <span class="na">id =</span> <span class="s">&#34;life_cycle_demo&#34;</span>
<span class="ln"> 9</span>         <span class="na">class =</span> <span class="s">&#34;com.example.LifeCycleDemo&#34;</span>
<span class="ln">10</span>         <span class="na">init-method =</span> <span class="s">&#34;init&#34;</span> 
<span class="ln">11</span>         <span class="na">destroy-method =</span> <span class="s">&#34;destroy&#34;</span><span class="nt">&gt;</span>
<span class="ln">12</span>   <span class="nt">&lt;/bean&gt;</span>
<span class="ln">13</span>
<span class="ln">14</span><span class="nt">&lt;/beans&gt;</span>
</code></pre></div><p>In <em>Code 3-3(b)</em>, it defines a <em>bean</em> named &quot;life_cycle_demo&quot; of the class &quot;com.example.LifeCycleDemo&quot; with initialization(<code>init</code>) and destruction (<code>destroy</code>) methods.</p>
<p><em>Code 3-3(c). &quot;LifeCycleDemoTest.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.context.support.AbstractApplicationContext</span><span class="o">;</span>
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">org.springframework.context.support.ClassPathXmlApplicationContext</span><span class="o">;</span>
<span class="ln"> 5</span>
<span class="ln"> 6</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LifeCycleDemoTest</span> <span class="o">{</span>
<span class="ln"> 7</span>   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 8</span>      <span class="n">AbstractApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;beans.xml&#34;</span><span class="o">);</span>
<span class="ln"> 9</span>
<span class="ln">10</span>      <span class="n">LifeCycleDemo</span> <span class="n">obj</span> <span class="o">=</span> <span class="o">(</span><span class="n">LifeCycleDemo</span><span class="o">)</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;life_cycle_demo&#34;</span><span class="o">);</span>
<span class="ln">11</span>      <span class="n">obj</span><span class="o">.</span><span class="na">foo</span><span class="o">();</span>
<span class="ln">12</span>      <span class="n">context</span><span class="o">.</span><span class="na">registerShutdownHook</span><span class="o">();</span> <span class="c1">// display destroy info (registers a shutdown hook for the Spring application context)
</span><span class="ln">13</span><span class="c1"></span>   <span class="o">}</span>
<span class="ln">14</span><span class="o">}</span>
</code></pre></div><p>In <em>Code 3-3(c)</em>, it demonstrates how to use the Spring Framework to initialize the Spring container, retrieve a bean from the container, and invoke a method on the bean. Additionally, it ensures that the Spring context is properly closed when the application exits by registering a shutdown hook.</p>
<p>When the Code 3-3(a, b, c) are executed, the following results should appear in the console:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="ln">1</span>Bean initialized.
<span class="ln">2</span>foo
<span class="ln">3</span>Bean destroyed.
</code></pre></div><h2 id="33-postprocessors">3.3 Postprocessors</h2>
<p><code>BeanPostProcessor</code> is an <em>interface</em> defined in <code>org.springframework.beans.factory.config.BeanPostProcessor</code>, and it allows for custom modification of new bean instance.</p>
<p>Code 3-4 shows how to use Postprocessor.</p>
<p><em>Code 3-4(a). &quot;PostprocessorDemo.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">PostprocessorDemo</span> <span class="o">{</span>
<span class="ln"> 4</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
<span class="ln"> 5</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;init&#34;</span><span class="o">);</span>
<span class="ln"> 6</span>   <span class="o">}</span>
<span class="ln"> 7</span>
<span class="ln"> 8</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span>
<span class="ln"> 9</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;foo...&#34;</span><span class="o">);</span>
<span class="ln">10</span>   <span class="o">}</span>
<span class="ln">11</span>
<span class="ln">12</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">destroy</span><span class="o">(){</span>
<span class="ln">13</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;destroy&#34;</span><span class="o">);</span>
<span class="ln">14</span>   <span class="o">}</span>
<span class="ln">15</span><span class="o">}</span>
</code></pre></div><p>In <em>Code 3-4(a)</em>, just like <em>Code 3-3(a)</em>, a straightforward class named <code>PostprocessorDemo</code> is defined, comprising three methods: <code>init()</code>, <code>foo()</code>, and <code>destroy()</code>. Each of these methods prints out status information to indicate its current stage.</p>
<p><em>Code 3-4(b). &quot;InitPostprocessorDemo.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.beans.factory.config.BeanPostProcessor</span><span class="o">;</span>
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">org.springframework.beans.BeansException</span><span class="o">;</span>
<span class="ln"> 5</span>
<span class="ln"> 6</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">InitPostprocessorDemo</span> <span class="kd">implements</span> <span class="n">BeanPostProcessor</span> <span class="o">{</span>
<span class="ln"> 7</span>   <span class="kd">public</span> <span class="n">Object</span> <span class="nf">postProcessBeforeInitialization</span><span class="o">(</span><span class="n">Object</span> <span class="n">bean</span><span class="o">,</span> <span class="n">String</span> <span class="n">beanName</span><span class="o">)</span> 
<span class="ln"> 8</span>      <span class="kd">throws</span> <span class="n">BeansException</span> <span class="o">{</span>
<span class="ln"> 9</span>      
<span class="ln">10</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Before init of &#34;</span> <span class="o">+</span> <span class="n">beanName</span><span class="o">);</span>
<span class="ln">11</span>      <span class="k">return</span> <span class="n">bean</span><span class="o">;</span>
<span class="ln">12</span>   <span class="o">}</span>
<span class="ln">13</span>   <span class="kd">public</span> <span class="n">Object</span> <span class="nf">postProcessAfterInitialization</span><span class="o">(</span><span class="n">Object</span> <span class="n">bean</span><span class="o">,</span> <span class="n">String</span> <span class="n">beanName</span><span class="o">)</span> 
<span class="ln">14</span>      <span class="kd">throws</span> <span class="n">BeansException</span> <span class="o">{</span>
<span class="ln">15</span>      
<span class="ln">16</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;After init of &#34;</span> <span class="o">+</span> <span class="n">beanName</span><span class="o">);</span>
<span class="ln">17</span>      <span class="k">return</span> <span class="n">bean</span><span class="o">;</span> 
<span class="ln">18</span>   <span class="o">}</span>
<span class="ln">19</span><span class="o">}</span>
</code></pre></div><p><em>Code 3-4(b)</em> is an example of implementing <code>BeanPostProcessor</code>, which prints a bean name <em>before</em> and <em>after</em> <em>initialization</em> of a bean. Note: the return type of <code>postProcessBeforeInitialization</code> and <code>postProcessAfterInitialization</code> is quite arbitrary, so they do not require <em>bean</em> as return values.</p>
<p><em>Code 3-4(c). &quot;beans.xml&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="ln"> 1</span><span class="cp">&lt;?xml version = &#34;1.0&#34; encoding = &#34;UTF-8&#34;?&gt;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="nt">&lt;beans</span> <span class="na">xmlns =</span> <span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
<span class="ln"> 4</span>   <span class="na">xmlns:xsi =</span> <span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
<span class="ln"> 5</span>   <span class="na">xsi:schemaLocation =</span> <span class="s">&#34;http://www.springframework.org/schema/beans
</span><span class="ln"> 6</span><span class="s">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&#34;</span><span class="nt">&gt;</span>
<span class="ln"> 7</span>
<span class="ln"> 8</span>   <span class="nt">&lt;bean</span> <span class="na">id =</span> <span class="s">&#34;demo&#34;</span> 
<span class="ln"> 9</span>         <span class="na">class =</span> <span class="s">&#34;com.example.PostprocessorDemo&#34;</span>
<span class="ln">10</span>         <span class="na">init-method =</span> <span class="s">&#34;init&#34;</span>
<span class="ln">11</span>         <span class="na">destroy-method =</span> <span class="s">&#34;destroy&#34;</span> <span class="nt">/&gt;</span>
<span class="ln">12</span>
<span class="ln">13</span>   <span class="nt">&lt;bean</span> <span class="na">class =</span> <span class="s">&#34;com.example.InitPostprocessorDemo&#34;</span> <span class="nt">/&gt;</span>
<span class="ln">14</span>
<span class="ln">15</span><span class="nt">&lt;/beans&gt;</span>
</code></pre></div><p><em>Code 3-4(c)</em> defines two beans. The first bean with the ID &quot;demo&quot; associates itself with the class &quot;com.example.PostprocessorDemo&quot;, and it specifies an initialization method called &quot;init&quot; as well as a destruction method called &quot;destroy&quot;; the second bean serves as a custom post-processor for &quot;demo&quot; in the Spring Application Context.</p>
<p><em>Code 3-4(d). &quot;PostprocessorDemoTest.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.context.support.AbstractApplicationContext</span><span class="o">;</span>
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">org.springframework.context.support.ClassPathXmlApplicationContext</span><span class="o">;</span>
<span class="ln"> 5</span>
<span class="ln"> 6</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">PostprocessorDemoTest</span> <span class="o">{</span>
<span class="ln"> 7</span>   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 8</span>      <span class="n">AbstractApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;beans.xml&#34;</span><span class="o">);</span>
<span class="ln"> 9</span>
<span class="ln">10</span>      <span class="n">PostprocessorDemo</span> <span class="n">obj</span> <span class="o">=</span> <span class="o">(</span><span class="n">PostprocessorDemo</span><span class="o">)</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;demo&#34;</span><span class="o">);</span>
<span class="ln">11</span>      <span class="n">obj</span><span class="o">.</span><span class="na">foo</span><span class="o">();</span>
<span class="ln">12</span>      <span class="n">context</span><span class="o">.</span><span class="na">registerShutdownHook</span><span class="o">();</span>
<span class="ln">13</span>   <span class="o">}</span>
<span class="ln">14</span><span class="o">}</span>
</code></pre></div><p><em>Code 3-4(d)</em> demonstrates the usage of a Spring Framework postprocessor. It only load the bean with ID &quot;demo&quot; but not the Postprocessor class. And The expected output of <em>Code 3-4</em> should be:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="ln">1</span>Before init of demo
<span class="ln">2</span>init
<span class="ln">3</span>After init of demo
<span class="ln">4</span>foo...
<span class="ln">5</span>destroy
</code></pre></div><h2 id="34-definition-inheritance">3.4 Definition Inheritance</h2>
<p>Spring supports <em>bean definition inheritance</em> to promote reusability and minimize development effort.</p>
<p>Code 3-5 shows the basic usage of Bean definition inheritance:</p>
<p><em>Code 3-5(a). &quot;Hello.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Hello</span> <span class="o">{</span>
<span class="ln"> 4</span>   <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
<span class="ln"> 5</span>   <span class="kd">private</span> <span class="n">String</span> <span class="n">type</span><span class="o">;</span>
<span class="ln"> 6</span>
<span class="ln"> 7</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">){</span>
<span class="ln"> 8</span>      <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
<span class="ln"> 9</span>   <span class="o">}</span>
<span class="ln">10</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setType</span><span class="o">(</span><span class="n">String</span> <span class="n">type</span><span class="o">){</span>
<span class="ln">11</span>      <span class="k">this</span><span class="o">.</span><span class="na">type</span> <span class="o">=</span> <span class="n">type</span><span class="o">;</span>
<span class="ln">12</span>   <span class="o">}</span>
<span class="ln">13</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sayHello</span><span class="o">(){</span>
<span class="ln">14</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Hello &#34;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s">&#34;, type = &#34;</span> <span class="o">+</span> <span class="n">type</span><span class="o">);</span>
<span class="ln">15</span>   <span class="o">}</span>
<span class="ln">16</span><span class="o">}</span>
</code></pre></div><p><em>Code 3-5(a)</em> shows a basic class called <code>Hello</code>, and <code>Hello</code> has two private instance variables, <code>name</code> and <code>type</code>, along with corresponding setter methods <code>setName</code> and <code>setType</code> to set their values. Additionally, the class contains a method <code>sayHello()</code> that prints a greeting message with the <code>name</code> and <code>type</code> values.</p>
<p><em>Code 3-5(b). &quot;HelloStudent.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloStudent</span> <span class="o">{</span>
<span class="ln"> 4</span>   <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
<span class="ln"> 5</span>   <span class="kd">private</span> <span class="n">String</span> <span class="n">type</span><span class="o">;</span>
<span class="ln"> 6</span>   <span class="kd">private</span> <span class="n">String</span> <span class="n">school</span><span class="o">;</span>
<span class="ln"> 7</span>
<span class="ln"> 8</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 9</span>      <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
<span class="ln">10</span>   <span class="o">}</span>
<span class="ln">11</span>
<span class="ln">12</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setType</span><span class="o">(</span><span class="n">String</span> <span class="n">type</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">13</span>      <span class="k">this</span><span class="o">.</span><span class="na">type</span> <span class="o">=</span> <span class="n">type</span><span class="o">;</span>
<span class="ln">14</span>   <span class="o">}</span>
<span class="ln">15</span>
<span class="ln">16</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setSchool</span><span class="o">(</span><span class="n">String</span> <span class="n">school</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">17</span>      <span class="k">this</span><span class="o">.</span><span class="na">school</span> <span class="o">=</span> <span class="n">school</span><span class="o">;</span>
<span class="ln">18</span>   <span class="o">}</span>
<span class="ln">19</span>
<span class="ln">20</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sayHello</span><span class="o">(){</span>
<span class="ln">21</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Hello &#34;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s">&#34;, type = &#34;</span> <span class="o">+</span> <span class="n">type</span> <span class="o">+</span> <span class="s">&#34;, from &#34;</span> <span class="o">+</span> <span class="n">school</span><span class="o">);</span>
<span class="ln">22</span>   <span class="o">}</span>
<span class="ln">23</span><span class="o">}</span>
</code></pre></div><p><em>Code 3-5(b)</em> introduces a new class called <code>HelloStudent</code> which extends the functionality of the previous <code>Hello</code> class by adding an additional private instance variable, <code>school</code>, and a corresponding setter method <code>setSchool()</code> to set its value. With this extension, the <code>HelloStudent</code> class now represents a student entity with a name, a type, and the school they attend.</p>
<p><em>Code 3-5(c). &quot;beans.xml&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="ln"> 1</span><span class="cp">&lt;?xml version = &#34;1.0&#34; encoding = &#34;UTF-8&#34;?&gt;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="nt">&lt;beans</span> <span class="na">xmlns =</span> <span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
<span class="ln"> 4</span>   <span class="na">xmlns:xsi =</span> <span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
<span class="ln"> 5</span>   <span class="na">xsi:schemaLocation =</span> <span class="s">&#34;http://www.springframework.org/schema/beans
</span><span class="ln"> 6</span><span class="s">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&#34;</span><span class="nt">&gt;</span>
<span class="ln"> 7</span>
<span class="ln"> 8</span>   <span class="nt">&lt;bean</span> <span class="na">id =</span> <span class="s">&#34;hello&#34;</span> <span class="na">class =</span> <span class="s">&#34;com.example.Hello&#34;</span><span class="nt">&gt;</span>
<span class="ln"> 9</span>      <span class="nt">&lt;property</span> <span class="na">name =</span> <span class="s">&#34;name&#34;</span> <span class="na">value =</span> <span class="s">&#34;Tom&#34;</span><span class="nt">/&gt;</span>
<span class="ln">10</span>      <span class="nt">&lt;property</span> <span class="na">name =</span> <span class="s">&#34;type&#34;</span> <span class="na">value =</span> <span class="s">&#34;student&#34;</span><span class="nt">/&gt;</span>
<span class="ln">11</span>   <span class="nt">&lt;/bean&gt;</span>
<span class="ln">12</span>
<span class="ln">13</span>   <span class="nt">&lt;bean</span> <span class="na">id =</span><span class="s">&#34;helloStudent&#34;</span> <span class="na">class =</span> <span class="s">&#34;com.example.HelloStudent&#34;</span> <span class="na">parent =</span> <span class="s">&#34;hello&#34;</span><span class="nt">&gt;</span>
<span class="ln">14</span>      <span class="nt">&lt;property</span> <span class="na">name =</span> <span class="s">&#34;name&#34;</span> <span class="na">value =</span> <span class="s">&#34;Jerry&#34;</span><span class="nt">/&gt;</span>
<span class="ln">15</span>      <span class="nt">&lt;property</span> <span class="na">name =</span> <span class="s">&#34;school&#34;</span> <span class="na">value =</span> <span class="s">&#34;MIT&#34;</span><span class="nt">/&gt;</span>
<span class="ln">16</span>   <span class="nt">&lt;/bean&gt;</span>
<span class="ln">17</span><span class="nt">&lt;/beans&gt;</span>
</code></pre></div><p><em>Code 3-5(c)</em> sets up two beans, <code>hello</code> and <code>helloStudent</code>, and <code>helloStudent</code> inherits bean definition from its parent called <code>hello</code>. Note the <code>parent=&quot;hello&quot;</code> attribute in the &quot;helloStudent&quot; bean definition: This attribute indicates that &quot;helloStudent&quot; is a child bean of &quot;hello,&quot; and it will inherit the properties defined in the &quot;hello&quot; bean (i.e., <code>type</code> is set to <code>student</code>).</p>
<p><em>Code 3-5(d). &quot;HelloInheritanceTest.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.context.ApplicationContext</span><span class="o">;</span>
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">org.springframework.context.support.ClassPathXmlApplicationContext</span><span class="o">;</span>
<span class="ln"> 5</span>
<span class="ln"> 6</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloInheritanceTest</span> <span class="o">{</span>
<span class="ln"> 7</span>   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 8</span>      <span class="n">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;beans.xml&#34;</span><span class="o">);</span>
<span class="ln"> 9</span>      
<span class="ln">10</span>      <span class="n">Hello</span> <span class="n">tom</span> <span class="o">=</span> <span class="o">(</span><span class="n">Hello</span><span class="o">)</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;hello&#34;</span><span class="o">);</span>
<span class="ln">11</span>      <span class="n">tom</span><span class="o">.</span><span class="na">sayHello</span><span class="o">();</span>
<span class="ln">12</span>
<span class="ln">13</span>      <span class="n">HelloStudent</span> <span class="n">jerry</span> <span class="o">=</span> <span class="o">(</span><span class="n">HelloStudent</span><span class="o">)</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;helloStudent&#34;</span><span class="o">);</span>
<span class="ln">14</span>      <span class="n">jerry</span><span class="o">.</span><span class="na">sayHello</span><span class="o">();</span>
<span class="ln">15</span>   <span class="o">}</span>
<span class="ln">16</span><span class="o">}</span>
</code></pre></div><p><em>Code 3-5(d)</em> demonstrates how to incorporate beans <code>hello</code> and <code>helloStudent</code>. And the expected output for Code 3-5 should be:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="ln">1</span>Hello Tom, type = student
<span class="ln">2</span>Hello Jerry, type = student, from MIT
</code></pre></div><h1 id="4-di">4. DI</h1>
<p><strong>Dependency injection</strong> (<strong>DI</strong>) is a pattern we can use to implement IoC. When writing a complex Java application, DI helps in gluing these classes together and keeping them independent at the same time.</p>
<p>There are two major variants for <em>DI</em>: <strong>Constructor-based DI</strong>, and <strong>Setter-based DI</strong>. It is recommended to use constructor arguments for <em>mandatory dependencies</em> and setters for <em>optional dependencies</em>.</p>
<p>In this section, we use two simple examples to show how DI works, and Code 4-1(a, b) are the generic parts for these two examples:</p>
<p><em>Code 4-1(a). &quot;MessageService.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln">1</span><span class="kn">package</span> <span class="nn">com.example.di</span><span class="o">;</span>
<span class="ln">2</span>
<span class="ln">3</span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MessageService</span> <span class="o">{</span>
<span class="ln">4</span>    <span class="n">String</span> <span class="nf">getMessage</span><span class="o">();</span>
<span class="ln">5</span><span class="o">}</span>
</code></pre></div><p><em>Code 4-1(a)</em> defines an <em>interface</em> <code>MessageService</code> that declares a <em>method</em> <code>getMessage()</code>.</p>
<p><em>Code 4-1(b). &quot;MessageServiceTest.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.di</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.context.ApplicationContext</span><span class="o">;</span>
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">org.springframework.context.support.ClassPathXmlApplicationContext</span><span class="o">;</span>
<span class="ln"> 5</span>
<span class="ln"> 6</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MessageServiceTest</span> <span class="o">{</span>
<span class="ln"> 7</span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 8</span>        <span class="n">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;beans.xml&#34;</span><span class="o">);</span>
<span class="ln"> 9</span>        <span class="n">MessageService</span> <span class="n">messageService</span> <span class="o">=</span> <span class="o">(</span><span class="n">MessageService</span><span class="o">)</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;messageService&#34;</span><span class="o">);</span>
<span class="ln">10</span>        <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messageService</span><span class="o">.</span><span class="na">getMessage</span><span class="o">();</span>
<span class="ln">11</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Message: &#34;</span> <span class="o">+</span> <span class="n">message</span><span class="o">);</span>
<span class="ln">12</span>    <span class="o">}</span>
<span class="ln">13</span><span class="o">}</span>
</code></pre></div><p><em>Code 4-1(b)</em> creates a class named <code>MessageServiceTest</code> that will load the Spring application context and retrieve the <code>MessageService</code> bean.</p>
<h2 id="41-constructor-based-di">4.1 Constructor-based DI</h2>
<p><strong>Constructor-based DI</strong> is accomplished when the container invokes a class <em>constructor</em> with a number of arguments (each representing a dependency on the other class).</p>
<p><em>Code 4-1(a, b)</em> and <em>Code 4-2(a, b)</em> demonstrate how to use <em>Constructor-based DI</em>:</p>
<p><em>Code 4-2(a). &quot;MessageServiceImplConstructorBased.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.di</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MessageServiceImplConstructorBased</span> <span class="kd">implements</span> <span class="n">MessageService</span> <span class="o">{</span>
<span class="ln"> 4</span>    <span class="kd">private</span> <span class="n">String</span> <span class="n">message</span><span class="o">;</span>
<span class="ln"> 5</span>
<span class="ln"> 6</span>    <span class="c1">// Constructor for DI
</span><span class="ln"> 7</span><span class="c1"></span>    <span class="kd">public</span> <span class="nf">MessageServiceImplConstructorBased</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 8</span>        <span class="k">this</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
<span class="ln"> 9</span>    <span class="o">}</span>
<span class="ln">10</span>
<span class="ln">11</span>    <span class="nd">@Override</span>
<span class="ln">12</span>    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getMessage</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">13</span>        <span class="k">return</span> <span class="n">message</span><span class="o">;</span>
<span class="ln">14</span>    <span class="o">}</span>
<span class="ln">15</span><span class="o">}</span>
</code></pre></div><p><em>Code 4-2(a)</em> defines the <em>implementation</em> of the <code>MessageService</code> <em>interface</em> as <code>MessageServiceImplConstructorBased</code>.</p>
<p><em>Code 4-2(b). &quot;beans.xml&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="ln"> 1</span><span class="cp">&lt;?xml version = &#34;1.0&#34; encoding = &#34;UTF-8&#34;?&gt;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="nt">&lt;beans</span> <span class="na">xmlns =</span> <span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
<span class="ln"> 4</span>   <span class="na">xmlns:xsi =</span> <span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
<span class="ln"> 5</span>   <span class="na">xsi:schemaLocation =</span> <span class="s">&#34;http://www.springframework.org/schema/beans
</span><span class="ln"> 6</span><span class="s">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&#34;</span><span class="nt">&gt;</span>
<span class="ln"> 7</span>
<span class="ln"> 8</span>   <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;messageService&#34;</span> <span class="na">class=</span><span class="s">&#34;com.example.di.MessageServiceImplConstructorBased&#34;</span><span class="nt">&gt;</span>
<span class="ln"> 9</span>      <span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">&#34;Hello, this is a constructor-based DI example!&#34;</span> <span class="nt">/&gt;</span>
<span class="ln">10</span>   <span class="nt">&lt;/bean&gt;</span>
<span class="ln">11</span>
<span class="ln">12</span><span class="nt">&lt;/beans&gt;</span>
</code></pre></div><p><em>Code 4-2(b)</em> defines a <em>bean</em> with the ID &quot;messageService&quot; and specifies the class <code>com.example.di.MessageServiceImplConstructorBased</code>. It also provides a <em>constructor argument</em> (value = &quot;Hello, this is a constructor-based DI example!&quot;) for DI. This argument will be passed to the <em>constructor</em> of <code>MessageServiceImplConstructorBased</code> when the <em>bean</em> is created.</p>
<p>The expected output for <em>Code 4-1(a, b)</em> and <em>Code 4-2(a, b)</em> is:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="ln">1</span>Message: Hello, this is a constructor-based DI example!
</code></pre></div><p>Now, let's dig it deeper. If we want to pass <em>multiple</em> objects into a constructor:</p>
<p><em>Code 4-2-extend(a). &quot;Foo.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span>  <span class="nn">com.example.di</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
<span class="ln"> 4</span>   <span class="kd">private</span> <span class="kt">int</span>  <span class="n">id</span><span class="o">;</span>
<span class="ln"> 5</span>   <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
<span class="ln"> 6</span>   <span class="kd">private</span> <span class="n">Bar</span> <span class="n">bar</span><span class="o">;</span>
<span class="ln"> 7</span>   <span class="kd">private</span> <span class="n">Baz</span> <span class="n">baz</span><span class="o">;</span>
<span class="ln"> 8</span>
<span class="ln"> 9</span>   <span class="c1">//Constructor for DI
</span><span class="ln">10</span><span class="c1"></span>   <span class="kd">public</span> <span class="nf">Foo</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">Bar</span> <span class="n">bar</span><span class="o">,</span> <span class="n">Baz</span> <span class="n">baz</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">11</span>        <span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
<span class="ln">12</span>        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
<span class="ln">13</span>        <span class="k">this</span><span class="o">.</span><span class="na">bar</span> <span class="o">=</span> <span class="n">bar</span><span class="o">;</span>
<span class="ln">14</span>        <span class="k">this</span><span class="o">.</span><span class="na">baz</span> <span class="o">=</span> <span class="n">baz</span><span class="o">;</span>
<span class="ln">15</span>    <span class="o">}</span>
<span class="ln">16</span>
<span class="ln">17</span>   <span class="kd">public</span> <span class="nf">show</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">18</span>      <span class="c1">// ...
</span><span class="ln">19</span><span class="c1"></span>   <span class="o">}</span>
<span class="ln">20</span><span class="o">}</span>
</code></pre></div><p><em>Code 4-2-extend(a)</em> shows a more complex example of <em>Constructor-based DI</em>. Assuming the <code>Bar</code> and <code>Baz</code> classes in the <em>package</em> <code>com.example.di</code>, we will initialize <code>Foo</code> object with a four-parameter (<code>id</code>, <code>name</code>, <code>bar</code>, and <code>baz</code>) constructor.</p>
<p><em>Code 4-2-extend(b). &quot;beans.xml&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="ln"> 1</span><span class="cp">&lt;?xml version = &#34;1.0&#34; encoding = &#34;UTF-8&#34;?&gt;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="nt">&lt;beans</span> <span class="na">xmlns =</span> <span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
<span class="ln"> 4</span>   <span class="na">xmlns:xsi =</span> <span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
<span class="ln"> 5</span>   <span class="na">xsi:schemaLocation =</span> <span class="s">&#34;http://www.springframework.org/schema/beans
</span><span class="ln"> 6</span><span class="s">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&#34;</span><span class="nt">&gt;</span>
<span class="ln"> 7</span>
<span class="ln"> 8</span>   <span class="c">&lt;!-- Define the bean for the Bar and Baz --&gt;</span>
<span class="ln"> 9</span>   <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;bar&#34;</span> <span class="na">class=</span><span class="s">&#34;com.example.di.Bar&#34;</span> <span class="nt">/&gt;</span>
<span class="ln">10</span>   <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;baz&#34;</span> <span class="na">class=</span><span class="s">&#34;com.example.di.Baz&#34;</span> <span class="nt">/&gt;</span>
<span class="ln">11</span>
<span class="ln">12</span>   <span class="c">&lt;!-- Define the bean for the Foo class with constructor-based Dependency Injection --&gt;</span>
<span class="ln">13</span>   <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;foo&#34;</span> <span class="na">class=</span><span class="s">&#34;com.example.di.Foo&#34;</span><span class="nt">&gt;</span>
<span class="ln">14</span>       <span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">&#34;1001&#34;</span> <span class="nt">/&gt;</span>  <span class="c">&lt;!-- id --&gt;</span>
<span class="ln">15</span>       <span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">&#34;Tommy&#34;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- name --&gt;</span>
<span class="ln">16</span>       <span class="nt">&lt;constructor-arg</span> <span class="na">ref=</span><span class="s">&#34;bar&#34;</span> <span class="nt">/&gt;</span>     <span class="c">&lt;!-- bar --&gt;</span>
<span class="ln">17</span>       <span class="nt">&lt;constructor-arg</span> <span class="na">ref=</span><span class="s">&#34;baz&#34;</span> <span class="nt">/&gt;</span>     <span class="c">&lt;!-- baz --&gt;</span>
<span class="ln">18</span>   <span class="nt">&lt;/bean&gt;</span>
<span class="ln">19</span>
<span class="ln">20</span><span class="nt">&lt;/beans&gt;</span>
</code></pre></div><p><em>Code 4-2-extend(b)</em> shows how to pass different parameters into constructor. For simple types like <code>int</code> and <code>String</code>, use <code>value</code>; for complex types like <code>Bar</code> and <code>Baz</code>, define the separate beans and then use <code>ref</code>.</p>
<p><em>Code 4-2-extend(c). &quot;FooTest.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.di</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.context.ApplicationContext</span><span class="o">;</span>
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">org.springframework.context.support.ClassPathXmlApplicationContext</span><span class="o">;</span>
<span class="ln"> 5</span>
<span class="ln"> 6</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FooTest</span> <span class="o">{</span>
<span class="ln"> 7</span>   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 8</span>      <span class="n">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;beans.xml&#34;</span><span class="o">);</span>
<span class="ln"> 9</span>      <span class="n">Foo</span> <span class="n">foo</span> <span class="o">=</span> <span class="o">(</span><span class="n">Foo</span><span class="o">)</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;foo&#34;</span><span class="o">);</span>
<span class="ln">10</span>      <span class="n">foo</span><span class="o">.</span><span class="na">show</span><span class="o">();</span>  
<span class="ln">11</span>   <span class="o">}</span>
<span class="ln">12</span><span class="o">}</span>
</code></pre></div><p>So, when passing a <em>reference</em> to an object, use ref attribute of <code>&lt;constructor-arg&gt;</code> tag; when passing a <em>value</em> directly, use <code>value</code> attribute.</p>
<h2 id="42-setter-based-di">4.2 Setter-based DI</h2>
<p><strong>Setter-based DI</strong> is accomplished by the <em>container</em> calling setter methods on your <em>beans</em> <strong>after</strong> invoking a <em>no-argument constructor</em> or <em>no-argument static factory</em> method to instantiate your bean.</p>
<p><em>Code 4-1(a, b)</em> and <em>Code 4-3(a, b)</em> demonstrate how to use <em>Setter-based DI</em>:</p>
<p><em>Code 4-3(a). &quot;MessageServiceImplSetterBased.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.di</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MessageServiceImplSetterBased</span> <span class="kd">implements</span> <span class="n">MessageService</span> <span class="o">{</span>
<span class="ln"> 4</span>    <span class="kd">private</span> <span class="n">String</span> <span class="n">message</span><span class="o">;</span>
<span class="ln"> 5</span>
<span class="ln"> 6</span>    <span class="c1">// Setter for DI
</span><span class="ln"> 7</span><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 8</span>        <span class="k">this</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
<span class="ln"> 9</span>    <span class="o">}</span>
<span class="ln">10</span>
<span class="ln">11</span>    <span class="nd">@Override</span>
<span class="ln">12</span>    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getMessage</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">13</span>        <span class="k">return</span> <span class="n">message</span><span class="o">;</span>
<span class="ln">14</span>    <span class="o">}</span>
<span class="ln">15</span><span class="o">}</span>
</code></pre></div><p><em>Code 4-3(a)</em> defines the implementation of the <code>MessageService</code> interface using <em>Setter</em> <code>setMessage()</code> to pass values into bean.</p>
<p><em>Code 4-3(b). &quot;beans.xml&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="ln"> 1</span><span class="cp">&lt;?xml version = &#34;1.0&#34; encoding = &#34;UTF-8&#34;?&gt;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="nt">&lt;beans</span> <span class="na">xmlns =</span> <span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
<span class="ln"> 4</span>   <span class="na">xmlns:xsi =</span> <span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
<span class="ln"> 5</span>   <span class="na">xsi:schemaLocation =</span> <span class="s">&#34;http://www.springframework.org/schema/beans
</span><span class="ln"> 6</span><span class="s">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&#34;</span><span class="nt">&gt;</span>
<span class="ln"> 7</span>
<span class="ln"> 8</span>   <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;messageService&#34;</span> <span class="na">class=</span><span class="s">&#34;com.example.di.MessageServiceImplSetterBased&#34;</span><span class="nt">&gt;</span>
<span class="ln"> 9</span>      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;message&#34;</span> <span class="na">value=</span><span class="s">&#34;Hello, this is a setter-based DI example!&#34;</span> <span class="nt">/&gt;</span>
<span class="ln">10</span>   <span class="nt">&lt;/bean&gt;</span>
<span class="ln">11</span>
<span class="ln">12</span><span class="nt">&lt;/beans&gt;</span>
</code></pre></div><p><em>Code 4-3(b)</em> provides a <code>&lt;property&gt;</code> element with the name &quot;message&quot; and the value &quot;Hello, this is a setter-based DI example!&quot;.</p>
<p>The expected output for <em>Code 4-1(a, b)</em> and <em>Code 4-3(a, b)</em> is:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="ln">1</span>Message: Hello, this is a setter-based DI example!
</code></pre></div><p>Now, let's dig it deeper. If we want to use multiple setters:</p>
<p><em>Code 4-3-extend(a). &quot;Foo.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span>  <span class="nn">com.example.di</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
<span class="ln"> 4</span>   <span class="kd">private</span> <span class="kt">int</span>  <span class="n">id</span><span class="o">;</span>
<span class="ln"> 5</span>   <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
<span class="ln"> 6</span>   <span class="kd">private</span> <span class="n">Bar</span> <span class="n">bar</span><span class="o">;</span>
<span class="ln"> 7</span>   <span class="kd">private</span> <span class="n">Baz</span> <span class="n">baz</span><span class="o">;</span>
<span class="ln"> 8</span>
<span class="ln"> 9</span>   <span class="c1">// Setters for DI
</span><span class="ln">10</span><span class="c1"></span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setId</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">11</span>        <span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
<span class="ln">12</span>   <span class="o">}</span>
<span class="ln">13</span>
<span class="ln">14</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">15</span>        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
<span class="ln">16</span>   <span class="o">}</span>
<span class="ln">17</span>
<span class="ln">18</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setBar</span><span class="o">(</span><span class="n">Bar</span> <span class="n">bar</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">19</span>       <span class="k">this</span><span class="o">.</span><span class="na">bar</span> <span class="o">=</span> <span class="n">bar</span><span class="o">;</span>
<span class="ln">20</span>   <span class="o">}</span>
<span class="ln">21</span>
<span class="ln">22</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setBaz</span><span class="o">(</span><span class="n">Baz</span> <span class="n">baz</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">23</span>       <span class="k">this</span><span class="o">.</span><span class="na">baz</span> <span class="o">=</span> <span class="n">baz</span><span class="o">;</span>
<span class="ln">24</span>   <span class="o">}</span>
<span class="ln">25</span>
<span class="ln">26</span>   <span class="c1">// other methods ...
</span><span class="ln">27</span><span class="c1"></span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">show</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">28</span>       <span class="c1">// ...
</span><span class="ln">29</span><span class="c1"></span>   <span class="o">}</span>
<span class="ln">30</span><span class="o">}</span>
</code></pre></div><p><em>Code 4-3-extend(a)</em> shows a more complex example of <em>Constructor-based DI</em>. Assuming the <code>Bar</code> and <code>Baz</code> classes in the <em>package</em> <code>com.example.di</code>, we will initialize <code>Foo</code> object with four setters (<code>setId()</code>, <code>setName()</code>, <code>setBar()</code>, and <code>setBaz()</code>).</p>
<p><em>Code 4-3-extend(b). &quot;beans.xml&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="ln"> 1</span><span class="cp">&lt;?xml version = &#34;1.0&#34; encoding = &#34;UTF-8&#34;?&gt;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="nt">&lt;beans</span> <span class="na">xmlns =</span> <span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
<span class="ln"> 4</span>   <span class="na">xmlns:xsi =</span> <span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
<span class="ln"> 5</span>   <span class="na">xsi:schemaLocation =</span> <span class="s">&#34;http://www.springframework.org/schema/beans
</span><span class="ln"> 6</span><span class="s">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&#34;</span><span class="nt">&gt;</span>
<span class="ln"> 7</span>
<span class="ln"> 8</span>   <span class="c">&lt;!-- Define the bean for the Bar and Baz --&gt;</span>
<span class="ln"> 9</span>   <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;bar&#34;</span> <span class="na">class=</span><span class="s">&#34;com.example.di.Bar&#34;</span> <span class="nt">/&gt;</span>
<span class="ln">10</span>   <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;baz&#34;</span> <span class="na">class=</span><span class="s">&#34;com.example.di.Baz&#34;</span> <span class="nt">/&gt;</span>
<span class="ln">11</span>
<span class="ln">12</span>   <span class="c">&lt;!-- Define the bean for the Foo class with setter-based Dependency Injection --&gt;</span>
<span class="ln">13</span>   <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;foo&#34;</span> <span class="na">class=</span><span class="s">&#34;com.example.di.Foo&#34;</span><span class="nt">&gt;</span>
<span class="ln">14</span>      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;id&#34;</span> <span class="na">value=</span><span class="s">&#34;1001&#34;</span> <span class="nt">/&gt;</span>
<span class="ln">15</span>      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;name&#34;</span> <span class="na">value=</span><span class="s">&#34;Tommy&#34;</span> <span class="nt">/&gt;</span>
<span class="ln">16</span>      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;bar&#34;</span> <span class="na">ref=</span><span class="s">&#34;bar&#34;</span> <span class="nt">/&gt;</span>
<span class="ln">17</span>      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;baz&#34;</span> <span class="na">ref=</span><span class="s">&#34;baz&#34;</span> <span class="nt">/&gt;</span>
<span class="ln">18</span>   <span class="nt">&lt;/bean&gt;</span>
<span class="ln">19</span>
<span class="ln">20</span><span class="nt">&lt;/beans&gt;</span>
</code></pre></div><p><em>Code 4-3-extend(b)</em> shows how to pass different parameters into setters. For simple types like <code>int</code> and <code>String</code>, use <code>value</code>; for complex types like <code>Bar</code> and <code>Baz</code>, define the separate beans and then use <code>ref</code>.</p>
<p><em>Code 4-3-extend(c). &quot;FooTest.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.di</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.context.ApplicationContext</span><span class="o">;</span>
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">org.springframework.context.support.ClassPathXmlApplicationContext</span><span class="o">;</span>
<span class="ln"> 5</span>
<span class="ln"> 6</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FooTest</span> <span class="o">{</span>
<span class="ln"> 7</span>   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 8</span>      <span class="n">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;beans.xml&#34;</span><span class="o">);</span>
<span class="ln"> 9</span>      <span class="n">Foo</span> <span class="n">foo</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;foo&#34;</span><span class="o">,</span> <span class="n">Foo</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="ln">10</span>      <span class="n">foo</span><span class="o">.</span><span class="na">show</span><span class="o">();</span>  
<span class="ln">11</span>   <span class="o">}</span>
<span class="ln">12</span><span class="o">}</span>
</code></pre></div><p>In <em>Setter-based DI</em>, the Spring container will call the appropriate <em>setter</em> methods on the <code>Foo</code> instance after creating it, injecting the <code>Bar</code> and <code>Baz</code> dependencies into the <code>Foo</code> object <code>foo</code>.</p>
<h2 id="43-injecting-collection">4.3 Injecting Collection</h2>
<p><strong>Injecting collections</strong> refers to the process of providing a collection of objects (array, list, set, map, or properties) to a Spring bean during its initialization.</p>
<p><em>Code 4-4(a). &quot;CollectionInjection.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.di</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">java.util.Set</span><span class="o">;</span>
<span class="ln"> 5</span><span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>
<span class="ln"> 6</span><span class="kn">import</span> <span class="nn">java.util.Properties</span><span class="o">;</span>
<span class="ln"> 7</span>
<span class="ln"> 8</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CollectionInjection</span> <span class="o">{</span>
<span class="ln"> 9</span>   <span class="kd">private</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">array</span><span class="o">;</span>
<span class="ln">10</span>   <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">;</span>
<span class="ln">11</span>   <span class="kd">private</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">set</span><span class="o">;</span>
<span class="ln">12</span>   <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">map</span><span class="o">;</span>
<span class="ln">13</span>   <span class="kd">private</span> <span class="n">Properties</span> <span class="n">properties</span><span class="o">;</span>
<span class="ln">14</span>
<span class="ln">15</span>   <span class="c1">// Setters
</span><span class="ln">16</span><span class="c1"></span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setArray</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">array</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">17</span>       <span class="k">this</span><span class="o">.</span><span class="na">array</span> <span class="o">=</span> <span class="n">array</span><span class="o">;</span>
<span class="ln">18</span>   <span class="o">}</span>
<span class="ln">19</span>
<span class="ln">20</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setList</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">21</span>       <span class="k">this</span><span class="o">.</span><span class="na">list</span> <span class="o">=</span> <span class="n">list</span><span class="o">;</span>
<span class="ln">22</span>   <span class="o">}</span>
<span class="ln">23</span>
<span class="ln">24</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setSet</span><span class="o">(</span><span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">set</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">25</span>       <span class="k">this</span><span class="o">.</span><span class="na">set</span> <span class="o">=</span> <span class="n">set</span><span class="o">;</span>
<span class="ln">26</span>   <span class="o">}</span>
<span class="ln">27</span>
<span class="ln">28</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setMap</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">map</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">29</span>       <span class="k">this</span><span class="o">.</span><span class="na">map</span> <span class="o">=</span> <span class="n">map</span><span class="o">;</span>
<span class="ln">30</span>   <span class="o">}</span>
<span class="ln">31</span>
<span class="ln">32</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setProperties</span><span class="o">(</span><span class="n">Properties</span> <span class="n">properties</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">33</span>       <span class="k">this</span><span class="o">.</span><span class="na">properties</span> <span class="o">=</span> <span class="n">properties</span><span class="o">;</span>
<span class="ln">34</span>   <span class="o">}</span>
<span class="ln">35</span><span class="o">}</span>
</code></pre></div><p><em>Code 4-4(a)</em> shows the target class for <em>Collection Injection</em>.</p>
<p><em>Code 4-4(b). &quot;beans.xml&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="ln"> 1</span><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span class="ln"> 2</span><span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
<span class="ln"> 3</span>       <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
<span class="ln"> 4</span>       <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://www.springframework.org/schema/beans
</span><span class="ln"> 5</span><span class="s">       http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span class="nt">&gt;</span>
<span class="ln"> 6</span>
<span class="ln"> 7</span>    <span class="c">&lt;!-- Define the CollectionInjection bean --&gt;</span>
<span class="ln"> 8</span>    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;collectionInjection&#34;</span> <span class="na">class=</span><span class="s">&#34;com.example.di.CollectionInjection&#34;</span><span class="nt">&gt;</span>
<span class="ln"> 9</span>        <span class="c">&lt;!-- Inject an array --&gt;</span>
<span class="ln">10</span>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;array&#34;</span><span class="nt">&gt;</span>
<span class="ln">11</span>            <span class="nt">&lt;array&gt;</span>
<span class="ln">12</span>                <span class="nt">&lt;value&gt;</span>1<span class="nt">&lt;/value&gt;</span>
<span class="ln">13</span>                <span class="nt">&lt;value&gt;</span>2<span class="nt">&lt;/value&gt;</span>
<span class="ln">14</span>                <span class="nt">&lt;value&gt;</span>3<span class="nt">&lt;/value&gt;</span>
<span class="ln">15</span>            <span class="nt">&lt;/array&gt;</span>
<span class="ln">16</span>        <span class="nt">&lt;/property&gt;</span>
<span class="ln">17</span>
<span class="ln">18</span>        <span class="c">&lt;!-- Inject a list --&gt;</span>
<span class="ln">19</span>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;list&#34;</span><span class="nt">&gt;</span>
<span class="ln">20</span>            <span class="nt">&lt;list&gt;</span>
<span class="ln">21</span>                <span class="nt">&lt;value&gt;</span>First element<span class="nt">&lt;/value&gt;</span>
<span class="ln">22</span>                <span class="nt">&lt;value&gt;</span>Second element<span class="nt">&lt;/value&gt;</span>
<span class="ln">23</span>                <span class="nt">&lt;value&gt;</span>Third element<span class="nt">&lt;/value&gt;</span>
<span class="ln">24</span>            <span class="nt">&lt;/list&gt;</span>
<span class="ln">25</span>        <span class="nt">&lt;/property&gt;</span>
<span class="ln">26</span>
<span class="ln">27</span>        <span class="c">&lt;!-- Inject a set --&gt;</span>
<span class="ln">28</span>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;set&#34;</span><span class="nt">&gt;</span>
<span class="ln">29</span>            <span class="nt">&lt;set&gt;</span>
<span class="ln">30</span>                <span class="nt">&lt;value&gt;</span>Set element 1<span class="nt">&lt;/value&gt;</span>
<span class="ln">31</span>                <span class="nt">&lt;value&gt;</span>Set element 2<span class="nt">&lt;/value&gt;</span>
<span class="ln">32</span>                <span class="nt">&lt;value&gt;</span>Set element 3<span class="nt">&lt;/value&gt;</span>
<span class="ln">33</span>            <span class="nt">&lt;/set&gt;</span>
<span class="ln">34</span>        <span class="nt">&lt;/property&gt;</span>
<span class="ln">35</span>
<span class="ln">36</span>        <span class="c">&lt;!-- Inject a map --&gt;</span>
<span class="ln">37</span>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;map&#34;</span><span class="nt">&gt;</span>
<span class="ln">38</span>            <span class="nt">&lt;map&gt;</span>
<span class="ln">39</span>                <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&#34;id&#34;</span> <span class="na">value=</span><span class="s">&#34;404&#34;</span><span class="nt">/&gt;</span>
<span class="ln">40</span>                <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&#34;msg&#34;</span> <span class="na">value=</span><span class="s">&#34;Page Not Found&#34;</span><span class="nt">/&gt;</span>
<span class="ln">41</span>            <span class="nt">&lt;/map&gt;</span>
<span class="ln">42</span>        <span class="nt">&lt;/property&gt;</span>
<span class="ln">43</span>
<span class="ln">44</span>        <span class="c">&lt;!-- Inject properties --&gt;</span>
<span class="ln">45</span>        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;properties&#34;</span><span class="nt">&gt;</span>
<span class="ln">46</span>            <span class="nt">&lt;props&gt;</span>
<span class="ln">47</span>                <span class="nt">&lt;prop</span> <span class="na">key=</span><span class="s">&#34;property1&#34;</span><span class="nt">&gt;</span>Property Value 1<span class="nt">&lt;/prop&gt;</span>
<span class="ln">48</span>                <span class="nt">&lt;prop</span> <span class="na">key=</span><span class="s">&#34;property2&#34;</span><span class="nt">&gt;</span>Property Value 2<span class="nt">&lt;/prop&gt;</span>
<span class="ln">49</span>                <span class="nt">&lt;prop</span> <span class="na">key=</span><span class="s">&#34;property3&#34;</span><span class="nt">&gt;</span>Property Value 3<span class="nt">&lt;/prop&gt;</span>
<span class="ln">50</span>            <span class="nt">&lt;/props&gt;</span>
<span class="ln">51</span>        <span class="nt">&lt;/property&gt;</span>
<span class="ln">52</span>    <span class="nt">&lt;/bean&gt;</span>
<span class="ln">53</span><span class="nt">&lt;/beans&gt;</span>
</code></pre></div><p><em>Code 4-4(b)</em> shows how to use XML file to inject <em>array</em>, <em>list</em>, <em>set</em>, <em>map</em>, and <em>properties</em>.</p>
<h2 id="44-autowire">4.4 Autowire</h2>
<p><strong>Autowire</strong> is a specific feature of Spring DI that simplifies the process of injecting dependencies by automatically wiring beans together (without explicit configuration).</p>
<p>There are five <em>autowiring modes</em>:</p>
<p><em>Table 4-1. Autowiring Modes</em></p>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>no</em></td>
<td><em>No autowiring</em> (<em>default mode</em>)</td>
</tr>
<tr>
<td><em>byName</em></td>
<td>Autowiring by property <em>name</em></td>
</tr>
<tr>
<td><em>byType</em></td>
<td>Autowiring by property <em>data type</em>, match exactly one</td>
</tr>
<tr>
<td><em>constructor</em></td>
<td>Autowiring by <em>constructor</em>, match exactly one</td>
</tr>
<tr>
<td><em>autodetect</em></td>
<td>first autowire by <em>constructor</em>, then autowire by <em>byType</em></td>
</tr>
</tbody>
</table>
<p>Note: to wire <em>arrays</em> and other typed-collections, use <em>byType</em> or <em>constructor</em> autowiring mode.</p>
<p>Now we will use the spell checker <code>textEditor.spellCheck()</code> to demonstrate <em>autowiring modes</em>, and partial codes are shown in <em>Code 4-5(a, b, c)</em>:</p>
<p><em>Code 4-5(a). &quot;TextEditorTest.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.di</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.context.ApplicationContext</span><span class="o">;</span>
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">org.springframework.context.support.ClassPathXmlApplicationContext</span><span class="o">;</span>
<span class="ln"> 5</span>
<span class="ln"> 6</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TextEditorTest</span> <span class="o">{</span>
<span class="ln"> 7</span>   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 8</span>      <span class="n">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;beans.xml&#34;</span><span class="o">);</span>
<span class="ln"> 9</span>      <span class="n">TextEditor</span> <span class="n">textEditor</span> <span class="o">=</span> <span class="o">(</span><span class="n">TextEditor</span><span class="o">)</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;textEditor&#34;</span><span class="o">);</span>
<span class="ln">10</span>      <span class="n">textEditor</span><span class="o">.</span><span class="na">spellCheck</span><span class="o">();</span>
<span class="ln">11</span>   <span class="o">}</span>
<span class="ln">12</span><span class="o">}</span>
</code></pre></div><p><em>Code 4-5(a)</em> is a test class to demonstrate how various <em>autowire modes</em> work.</p>
<p><em>Code 4-5(b). &quot;SpellChecker.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln">1</span><span class="kn">package</span> <span class="nn">com.example.di</span><span class="o">;</span>
<span class="ln">2</span>
<span class="ln">3</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpellChecker</span> <span class="o">{</span>
<span class="ln">4</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">checkSpelling</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">5</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;check Spelling...&#34;</span><span class="o">);</span>
<span class="ln">6</span>   <span class="o">}</span>
<span class="ln">7</span><span class="o">}</span>
</code></pre></div><p><em>Code 4-5(b)</em> defines a class named <code>SpellChecker</code>, which is a simple Java class responsible for checking spellings. The <code>SpellChecker</code> class has a single method called <code>checkSpelling()</code> that prints the message &quot;check Spelling...&quot; to the console.</p>
<p><em>Code 4-5(c). &quot;TextEditor.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.di</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TextEditor</span> <span class="o">{</span>
<span class="ln"> 4</span>   <span class="c1">// autowire the `spellChecker` from Spring Container
</span><span class="ln"> 5</span><span class="c1"></span>   <span class="kd">private</span> <span class="n">SpellChecker</span> <span class="n">spellChecker</span><span class="o">;</span>
<span class="ln"> 6</span>
<span class="ln"> 7</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setSpellChecker</span><span class="o">(</span> <span class="n">SpellChecker</span> <span class="n">spellChecker</span> <span class="o">)</span> <span class="o">{</span>
<span class="ln"> 8</span>      <span class="k">this</span><span class="o">.</span><span class="na">spellChecker</span> <span class="o">=</span> <span class="n">spellChecker</span><span class="o">;</span>
<span class="ln"> 9</span>   <span class="o">}</span>
<span class="ln">10</span>
<span class="ln">11</span>   <span class="kd">public</span> <span class="n">SpellChecker</span> <span class="nf">getSpellChecker</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">12</span>      <span class="k">return</span> <span class="n">spellChecker</span><span class="o">;</span>
<span class="ln">13</span>   <span class="o">}</span>
<span class="ln">14</span>
<span class="ln">15</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">spellCheck</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">16</span>      <span class="n">spellChecker</span><span class="o">.</span><span class="na">checkSpelling</span><span class="o">();</span>
<span class="ln">17</span>   <span class="o">}</span>
<span class="ln">18</span><span class="o">}</span>
</code></pre></div><p><em>Code 4-5(c)</em> defines a class named <code>TextEditor</code>, which is used to perform spell checking through the use of the <code>SpellChecker</code> defined in <em>Code 4-5(b)</em>.</p>
<p>With <em>Code 4-5(d, e, or f)</em>, the expected output for <em>Code 4-5(a, b, c)</em> should be:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="ln">1</span>check Spelling...
</code></pre></div><h3 id="441-autowire-byname">4.4.1 Autowire <code>byName</code></h3>
<p>In XML configuration file, Spring container looks at the beans on which <code>autowire</code> attribute is set to <code>byName</code>, Spring container will then look for other beans with names that match the <em>properties</em> of the bean (the bean set to <code>byName</code>-autowiring). If matches are found, Spring will automatically inject those matching beans into the <em>properties</em> of the specified bean; otherwise, the bean's <em>properties</em> will remain unwired.</p>
<p><em>Code 4-5(a, b, c)</em> and <em>Code 4-5(d)</em> demonstrate how autowire <code>byName</code> works:</p>
<p><em>Code 4-5(d) &quot;beans.xml&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="ln"> 1</span><span class="cp">&lt;?xml version = &#34;1.0&#34; encoding = &#34;UTF-8&#34;?&gt;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="nt">&lt;beans</span> <span class="na">xmlns =</span> <span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
<span class="ln"> 4</span>   <span class="na">xmlns:xsi =</span> <span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
<span class="ln"> 5</span>   <span class="na">xsi:schemaLocation =</span> <span class="s">&#34;http://www.springframework.org/schema/beans
</span><span class="ln"> 6</span><span class="s">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&#34;</span><span class="nt">&gt;</span>
<span class="ln"> 7</span>
<span class="ln"> 8</span>   <span class="c">&lt;!-- Definition for spellChecker bean --&gt;</span>
<span class="ln"> 9</span>   <span class="nt">&lt;bean</span> <span class="na">id =</span> <span class="s">&#34;spellChecker&#34;</span> <span class="na">class =</span> <span class="s">&#34;com.example.di.SpellChecker&#34;</span> <span class="nt">/&gt;</span>
<span class="ln">10</span>
<span class="ln">11</span>   <span class="c">&lt;!-- Definition for textEditor bean --&gt;</span>
<span class="ln">12</span>   <span class="nt">&lt;bean</span> <span class="na">id =</span> <span class="s">&#34;textEditor&#34;</span>
<span class="ln">13</span>         <span class="na">class =</span> <span class="s">&#34;com.example.di.TextEditor&#34;</span>
<span class="ln">14</span>         <span class="na">autowire =</span> <span class="s">&#34;byName&#34;</span> <span class="nt">/&gt;</span>
<span class="ln">15</span><span class="nt">&lt;/beans&gt;</span>
</code></pre></div><p>In <em>Code 4-5(d)</em>, Spring will look for a bean with the name <code>spellChecker</code> in the Spring Container and inject it into <code>spellChecker</code> property of <code>textEditor</code> bean, due to <code>autowire = &quot;byName&quot;</code> on <code>textEditor</code>. And to enable the <code>byName</code> autowiring, <code>TextEditor</code> must have a class member whose type is <code>SpellChecker</code>.</p>
<h3 id="442-autowire-bytype">4.4.2 Autowire <code>byType</code></h3>
<p>In the XML configuration file, when the autowire attribute is set to <code>byType</code> for a particular bean, the Spring container will attempt to find other beans in its context whose <em>types</em> match the <em>property types</em> of the bean being configured.</p>
<p><em>Code 4-5(a, b, c)</em> and <em>Code 4-5(e)</em> demonstrate how autowire <code>byType</code> works:</p>
<p><em>Code 4-5(e). &quot;beans.xml&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="ln"> 1</span><span class="cp">&lt;?xml version = &#34;1.0&#34; encoding = &#34;UTF-8&#34;?&gt;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="nt">&lt;beans</span> <span class="na">xmlns =</span> <span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
<span class="ln"> 4</span>   <span class="na">xmlns:xsi =</span> <span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
<span class="ln"> 5</span>   <span class="na">xsi:schemaLocation =</span> <span class="s">&#34;http://www.springframework.org/schema/beans
</span><span class="ln"> 6</span><span class="s">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&#34;</span><span class="nt">&gt;</span>
<span class="ln"> 7</span>
<span class="ln"> 8</span>   <span class="c">&lt;!-- Definition for spellChecker bean --&gt;</span>
<span class="ln"> 9</span>   <span class="nt">&lt;bean</span> <span class="na">id =</span> <span class="s">&#34;spellChecker&#34;</span> <span class="na">class =</span> <span class="s">&#34;com.example.di.SpellChecker&#34;</span> <span class="nt">/&gt;</span>
<span class="ln">10</span>
<span class="ln">11</span>   <span class="c">&lt;!-- Definition for textEditor bean --&gt;</span>
<span class="ln">12</span>   <span class="nt">&lt;bean</span> <span class="na">id =</span> <span class="s">&#34;textEditor&#34;</span>
<span class="ln">13</span>         <span class="na">class =</span> <span class="s">&#34;com.example.di.TextEditor&#34;</span>
<span class="ln">14</span>         <span class="na">autowire =</span> <span class="s">&#34;byType&#34;</span> <span class="nt">/&gt;</span>
<span class="ln">15</span><span class="nt">&lt;/beans&gt;</span>
</code></pre></div><p>In <em>Code 4-5(e)</em>, Spring will automatically <em>inject</em> the <code>spellChecker</code> into <code>spellChecker</code> property of <code>textEditor</code> bean, because the <code>SpellChecker</code> class is defined as a Spring bean with the id <code>spellChecker</code>, and it matches the type of the <code>spellChecker</code> property in the <code>TextEditor</code> class.</p>
<h3 id="443-autowire-constructor">4.4.3 Autowire <code>constructor</code></h3>
<p>In the XML configuration file, Spring container looks at the beans on which <code>autowire</code> attribute is set <code>constructor</code>. It then tries to match and wire its <em>constructor's argument</em> with exactly one of the beans name in the configuration file. If matches are found, it will inject those beans; otherwise, bean(s) will remain unwired.</p>
<p><em>Code 4-5(f). &quot;beans.xml&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="ln"> 1</span><span class="cp">&lt;?xml version = &#34;1.0&#34; encoding = &#34;UTF-8&#34;?&gt;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="nt">&lt;beans</span> <span class="na">xmlns =</span> <span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
<span class="ln"> 4</span>   <span class="na">xmlns:xsi =</span> <span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
<span class="ln"> 5</span>   <span class="na">xsi:schemaLocation =</span> <span class="s">&#34;http://www.springframework.org/schema/beans
</span><span class="ln"> 6</span><span class="s">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&#34;</span><span class="nt">&gt;</span>
<span class="ln"> 7</span>
<span class="ln"> 8</span>   <span class="c">&lt;!-- Definition for spellChecker bean --&gt;</span>
<span class="ln"> 9</span>   <span class="nt">&lt;bean</span> <span class="na">id =</span> <span class="s">&#34;spellChecker&#34;</span> <span class="na">class =</span> <span class="s">&#34;com.example.di.SpellChecker&#34;</span> <span class="nt">/&gt;</span>
<span class="ln">10</span>
<span class="ln">11</span>   <span class="c">&lt;!-- Definition for textEditor bean --&gt;</span>
<span class="ln">12</span>   <span class="nt">&lt;bean</span> <span class="na">id =</span> <span class="s">&#34;textEditor&#34;</span>
<span class="ln">13</span>         <span class="na">class =</span> <span class="s">&#34;com.example.di.TextEditor&#34;</span>
<span class="ln">14</span>         <span class="na">autowire =</span> <span class="s">&#34;constructor&#34;</span> <span class="nt">/&gt;</span>
<span class="ln">15</span><span class="nt">&lt;/beans&gt;</span>
</code></pre></div><h1 id="5-annotations">5. ANNOTATIONS</h1>
<p>Annotations are a form of <em>metadata</em>, that applies to the Java <em>classes</em>, <em>methods</em>, or <em>fields</em>, to provide additional information and instructions to the Spring container. Annotations offer a straightforward alternative to XML files for efficient configuration and management of components and their dependencies.</p>
<h2 id="51-configuration-annotations">5.1 Configuration Annotations</h2>
<p>Below are some <em>configuration annotations</em> used to configure the <em>Spring container</em>, manage <em>properties</em>, and activate <em>specific profiles</em>.</p>
<h3 id="511-bean">5.1.1 <code>@Bean</code></h3>
<p><code>@Bean</code> indicates that the return value of the annotated method should be registered as a bean in the Spring application context.</p>
<p><em>Code 5-1. Snippet of &quot;Address.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln">1</span>  <span class="nd">@Bean</span>
<span class="ln">2</span>  <span class="kd">public</span> <span class="n">Address</span> <span class="nf">getAddress</span><span class="o">(){</span>
<span class="ln">3</span>    <span class="k">return</span> <span class="k">new</span> <span class="n">Address</span><span class="o">();</span>
<span class="ln">4</span>  <span class="o">}</span>
</code></pre></div><p>In <em>Code 5-1</em>, <code>getAddress()</code> is annotated with <code>@Bean</code>, meaning that Spring will register the <code>Address</code> object <em>returned by that method</em> as a <em>bean</em>.</p>
<h3 id="512-configuration">5.1.2 <code>@Configuration</code></h3>
<p><code>@Configuration</code> annotation is used to declare a class as a configuration class in Spring.</p>
<p><em>Code 5-2. Snippet of &quot;DataConfig.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="nd">@Configuration</span>
<span class="ln"> 2</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DataConfig</span><span class="o">{</span> 
<span class="ln"> 3</span>  <span class="nd">@Bean</span>
<span class="ln"> 4</span>  <span class="kd">public</span> <span class="n">DataSource</span> <span class="nf">source</span><span class="o">(){</span>
<span class="ln"> 5</span>    <span class="n">DataSource</span> <span class="n">source</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OracleDataSource</span><span class="o">();</span>
<span class="ln"> 6</span>    <span class="n">source</span><span class="o">.</span><span class="na">setURL</span><span class="o">();</span>
<span class="ln"> 7</span>    <span class="n">source</span><span class="o">.</span><span class="na">setUser</span><span class="o">();</span>
<span class="ln"> 8</span>    <span class="k">return</span> <span class="n">source</span><span class="o">;</span>
<span class="ln"> 9</span>  <span class="o">}</span>
<span class="ln">10</span><span class="o">}</span>
</code></pre></div><p>In <em>Code 5-2</em>, <code>@Configuration</code> annotation declares the class <code>DataConfig</code> as a <em>configuration class</em> in Spring.</p>
<h3 id="513-componentscan">5.1.3 <code>@ComponentScan</code></h3>
<p><code>@ComponentScan</code> annotation is used to enable component scanning in Spring.</p>
<p><em>Code 5-3(a). &quot;AppConfig.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.annotation</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.ComponentScan</span><span class="o">;</span>
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="ln"> 5</span>
<span class="ln"> 6</span><span class="nd">@Configuration</span>
<span class="ln"> 7</span><span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">basePackages</span> <span class="o">=</span> <span class="s">&#34;com.example.annotation&#34;</span><span class="o">)</span>
<span class="ln"> 8</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppConfig</span> <span class="o">{</span>
<span class="ln"> 9</span>
<span class="ln">10</span><span class="o">}</span>
</code></pre></div><p>In <em>Code 5-3(a)</em>: <code>AppConfig</code> uses <code>@ComponentScan</code> to specify the <em>base package</em> for component scanning. When Spring performs <em>component scanning</em>, it looks for classes annotated with stereotypes like <code>@Component</code>, within the specified package and its sub-packages. Spring will then automatically create Spring <em>beans</em> for these classes and add them to the <em>application context</em>.</p>
<p><em>Code 5-3(b). &quot;HelloService.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.annotation</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="o">;</span>
<span class="ln"> 4</span>
<span class="ln"> 5</span><span class="nd">@Component</span>
<span class="ln"> 6</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloService</span> <span class="o">{</span>
<span class="ln"> 7</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sayHello</span><span class="o">()</span> <span class="o">{</span>
<span class="ln"> 8</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Hello World&#34;</span><span class="o">);</span>
<span class="ln"> 9</span>    <span class="o">}</span>
<span class="ln">10</span><span class="o">}</span>
</code></pre></div><p>In <em>Code 5-3(b)</em>: <code>HelloService</code> is annotated with <code>@Component</code>, indicating that it is a Spring bean that will be managed by the Spring container.</p>
<p><em>Code 5-3(c). &quot;AppTest.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.annotation</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.AnnotationConfigApplicationContext</span><span class="o">;</span>
<span class="ln"> 4</span>
<span class="ln"> 5</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppTest</span> <span class="o">{</span>
<span class="ln"> 6</span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 7</span>        <span class="n">AnnotationConfigApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnnotationConfigApplicationContext</span><span class="o">(</span><span class="n">AppConfig</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="ln"> 8</span>        <span class="n">HelloService</span> <span class="n">helloService</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="n">HelloService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="ln"> 9</span>        <span class="n">helloService</span><span class="o">.</span><span class="na">sayHello</span><span class="o">();</span>
<span class="ln">10</span>        <span class="n">context</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="c1">// !!! it is important to close the Annotation Config Application Context
</span><span class="ln">11</span><span class="c1"></span>    <span class="o">}</span>
<span class="ln">12</span><span class="o">}</span>
</code></pre></div><p><em>Code 5-3(c)</em> creates an <code>AnnotationConfigApplicationContext</code> using <code>AppConfig.class</code> as the <em>configuration class</em>, <em>retrieves</em> the <code>HelloService</code> bean from the context, and then calls the <code>sayHello()</code> method.</p>
<p>The expected output for Code 5-3(a, b, c) is:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="ln">1</span>Hello World
</code></pre></div><h3 id="514-propertysource">5.1.4 <code>@PropertySource</code></h3>
<p><code>@PropertySource</code> annotation is used to specify the location of properties files containing configuration settings for the Spring application.</p>
<p><em>Code 5-4(a). &quot;AppConfig.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.annotation.propertysource</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.PropertySource</span><span class="o">;</span>
<span class="ln"> 5</span>
<span class="ln"> 6</span><span class="nd">@Configuration</span>
<span class="ln"> 7</span><span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">basePackages</span> <span class="o">=</span> <span class="s">&#34;com.example.annotation.propertysource&#34;</span><span class="o">)</span>
<span class="ln"> 8</span><span class="nd">@PropertySource</span><span class="o">(</span><span class="s">&#34;classpath:application.yml&#34;</span><span class="o">)</span>
<span class="ln"> 9</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppConfig</span> <span class="o">{</span>
<span class="ln">10</span>   
<span class="ln">11</span><span class="o">}</span>
</code></pre></div><p><em>Code 5-4(a)</em> is a Java configuration class, and it specifies that it will define Spring beans and loads properties from the &quot;application.yml&quot; file.</p>
<p><em>Code 5-4(b). &quot;application.yml&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="ln">1</span><span class="nt">greeting</span><span class="p">:</span><span class="w">
</span><span class="ln">2</span><span class="w">  </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Hello, World!&#34;</span><span class="w">
</span></code></pre></div><p><em>Code 5-4(b)</em> is a YAML file that sets the property &quot;greeting.message&quot; with the value &quot;Hello, World!&quot; for the Spring application.</p>
<p><em>Code 5-4(c). &quot;GreetingService.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.annotation.propertysource</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Value</span><span class="o">;</span>
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="o">;</span>
<span class="ln"> 5</span>
<span class="ln"> 6</span><span class="nd">@Component</span>
<span class="ln"> 7</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">GreetingService</span> <span class="o">{</span>
<span class="ln"> 8</span>    <span class="nd">@Value</span><span class="o">(</span><span class="s">&#34;${greeting.message}&#34;</span><span class="o">)</span>
<span class="ln"> 9</span>    <span class="kd">private</span> <span class="n">String</span> <span class="n">message</span><span class="o">;</span>
<span class="ln">10</span>
<span class="ln">11</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sayGreeting</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">12</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
<span class="ln">13</span>    <span class="o">}</span>
<span class="ln">14</span><span class="o">}</span>
</code></pre></div><p><em>Code 5-4(c)</em> is a Spring component class, and it injects the value of the property &quot;greeting.message&quot; into the private field <code>greetingMessage</code> and provides a method to print the greeting message.</p>
<p><em>Code 5-4(d). &quot;AppTest.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.AnnotationConfigApplicationContext</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppTest</span> <span class="o">{</span>
<span class="ln"> 4</span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 5</span>        <span class="c1">// Create the application context using AppConfig
</span><span class="ln"> 6</span><span class="c1"></span>        <span class="n">AnnotationConfigApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnnotationConfigApplicationContext</span><span class="o">(</span><span class="n">AppConfig</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="ln"> 7</span>
<span class="ln"> 8</span>        <span class="c1">// Get the GreetingService bean from the context
</span><span class="ln"> 9</span><span class="c1"></span>        <span class="n">GreetingService</span> <span class="n">greetingService</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="n">GreetingService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="ln">10</span>
<span class="ln">11</span>        <span class="c1">// Call the sayGreeting() method to print &#34;Hello, World!&#34; on the console
</span><span class="ln">12</span><span class="c1"></span>        <span class="n">greetingService</span><span class="o">.</span><span class="na">sayGreeting</span><span class="o">();</span>
<span class="ln">13</span>
<span class="ln">14</span>        <span class="c1">// Close the context
</span><span class="ln">15</span><span class="c1"></span>        <span class="n">context</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="ln">16</span>    <span class="o">}</span>
<span class="ln">17</span><span class="o">}</span>
</code></pre></div><p>The expected output for Code 5-4(a, b, c, d) should be:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="ln">1</span>Hello, World!
</code></pre></div><h3 id="515-profile">5.1.5 <code>@Profile</code></h3>
<p><code>@Profile</code> annotation is used to define specific configurations for different application environments or scenarios.</p>
<p><em>Code 5-5(a). &quot;DatabaseConfig.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.annotation.profile</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="o">;</span>
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="ln"> 5</span><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Profile</span><span class="o">;</span>
<span class="ln"> 6</span>
<span class="ln"> 7</span><span class="nd">@Configuration</span>
<span class="ln"> 8</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DatabaseConfig</span> <span class="o">{</span>
<span class="ln"> 9</span>
<span class="ln">10</span>    <span class="nd">@Bean</span>
<span class="ln">11</span>    <span class="nd">@Profile</span><span class="o">(</span><span class="s">&#34;development&#34;</span><span class="o">)</span>
<span class="ln">12</span>    <span class="kd">public</span> <span class="n">DataSource</span> <span class="nf">developmentDataSource</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">13</span>        <span class="c1">// Create and configure the H2 data source for development
</span><span class="ln">14</span><span class="c1"></span>        <span class="k">return</span> <span class="k">new</span> <span class="n">H2DataSource</span><span class="o">();</span>
<span class="ln">15</span>    <span class="o">}</span>
<span class="ln">16</span>
<span class="ln">17</span>    <span class="nd">@Bean</span>
<span class="ln">18</span>    <span class="nd">@Profile</span><span class="o">(</span><span class="s">&#34;production&#34;</span><span class="o">)</span>
<span class="ln">19</span>    <span class="kd">public</span> <span class="n">DataSource</span> <span class="nf">productionDataSource</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">20</span>        <span class="c1">// Create and configure the MySQL data source for production
</span><span class="ln">21</span><span class="c1"></span>        <span class="k">return</span> <span class="k">new</span> <span class="n">MySQLDataSource</span><span class="o">();</span>
<span class="ln">22</span>    <span class="o">}</span>
<span class="ln">23</span><span class="o">}</span>
</code></pre></div><p><em>Code 5-5(b). &quot;DataSource.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.annotation.profile</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">DataSource</span> <span class="o">{</span>
<span class="ln"> 4</span>    <span class="c1">// Define common data source methods here
</span><span class="ln"> 5</span><span class="c1"></span><span class="o">}</span>
<span class="ln"> 6</span>
<span class="ln"> 7</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">H2DataSource</span> <span class="kd">implements</span> <span class="n">DataSource</span> <span class="o">{</span>
<span class="ln"> 8</span>    <span class="c1">// H2 data source implementation
</span><span class="ln"> 9</span><span class="c1"></span><span class="o">}</span>
<span class="ln">10</span>
<span class="ln">11</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MySQLDataSource</span> <span class="kd">implements</span> <span class="n">DataSource</span> <span class="o">{</span>
<span class="ln">12</span>    <span class="c1">// MySQL data source implementation
</span><span class="ln">13</span><span class="c1"></span><span class="o">}</span>
</code></pre></div><p>Code 5-5(c). &quot;application.yml&quot;</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="ln">1</span><span class="nt">spring</span><span class="p">:</span><span class="w">
</span><span class="ln">2</span><span class="w">  </span><span class="nt">profiles</span><span class="p">:</span><span class="w">
</span><span class="ln">3</span><span class="w">    </span><span class="nt">active</span><span class="p">:</span><span class="w"> </span><span class="l">development</span><span class="w">
</span></code></pre></div><p>This will activate the <code>@Profile(&quot;development&quot;)</code> part of <code>DataSource</code> bean.</p>
<h3 id="516-import">5.1.6 <code>@Import</code></h3>
<p><code>@Import</code> annotation is used to import one or more <em>configuration classes</em> into the current configuration.</p>
<p><em>Code 5-6(a). &quot;AppConfig.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="o">;</span>
<span class="ln"> 2</span><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="ln"> 3</span>
<span class="ln"> 4</span><span class="nd">@Configuration</span>
<span class="ln"> 5</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppConfig</span> <span class="o">{</span>
<span class="ln"> 6</span>
<span class="ln"> 7</span>    <span class="nd">@Bean</span>
<span class="ln"> 8</span>    <span class="kd">public</span> <span class="n">MyBean</span> <span class="nf">myBean</span><span class="o">()</span> <span class="o">{</span>
<span class="ln"> 9</span>        <span class="k">return</span> <span class="k">new</span> <span class="n">MyBean</span><span class="o">();</span>
<span class="ln">10</span>    <span class="o">}</span>
<span class="ln">11</span><span class="o">}</span>
</code></pre></div><p><em>Code 5-6(b). &quot;AnotherAppConfig.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln">1</span><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="ln">2</span><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Import</span><span class="o">;</span>
<span class="ln">3</span>
<span class="ln">4</span><span class="nd">@Configuration</span>
<span class="ln">5</span><span class="nd">@Import</span><span class="o">(</span><span class="n">AppConfig</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="ln">6</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AnotherConfig</span> <span class="o">{</span>
<span class="ln">7</span>    <span class="c1">// Additional configuration or beans can be defined here
</span><span class="ln">8</span><span class="c1"></span><span class="o">}</span>
<span class="ln">9</span>
</code></pre></div><p><em>Code 5-6(b)</em> makes all the beans defined in <code>AppConfig</code> (in this case, just <code>MyBean</code>) available in the current application context, when <code>AnotherConfig</code> is used.</p>
<h3 id="517-importresource">5.1.7 <code>@ImportResource</code></h3>
<p><code>@ImportResource</code> annotation is used to <em>import XML-based Spring configurations</em> into the current Java-based configuration class.</p>
<p><em>Code 5-7(a). &quot;AppConfig.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.annotation.config</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.ImportResource</span><span class="o">;</span>
<span class="ln"> 5</span>
<span class="ln"> 6</span><span class="nd">@Configuration</span>
<span class="ln"> 7</span><span class="nd">@ImportResource</span><span class="o">(</span><span class="s">&#34;classpath:config.xml&#34;</span><span class="o">)</span> <span class="c1">// Load the XML configuration file
</span><span class="ln"> 8</span><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppConfig</span> <span class="o">{</span>
<span class="ln"> 9</span>    <span class="c1">// Java-based configuration can also be defined here if needed
</span><span class="ln">10</span><span class="c1"></span><span class="o">}</span>
</code></pre></div><p><em>Code 5-7(a)</em> indicates that it contains Spring bean definitions. It also uses @ImportResource to load the XML configuration file &quot;config.xml.&quot;</p>
<p><em>Code 5-7(b). &quot;config.xml&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="ln"> 1</span><span class="cp">&lt;?xml version = &#34;1.0&#34; encoding = &#34;UTF-8&#34;?&gt;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="nt">&lt;beans</span> <span class="na">xmlns =</span> <span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
<span class="ln"> 4</span>   <span class="na">xmlns:xsi =</span> <span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
<span class="ln"> 5</span>   <span class="na">xsi:schemaLocation =</span> <span class="s">&#34;http://www.springframework.org/schema/beans
</span><span class="ln"> 6</span><span class="s">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&#34;</span><span class="nt">&gt;</span>
<span class="ln"> 7</span>
<span class="ln"> 8</span>   <span class="c">&lt;!-- Define a bean in the XML configuration --&gt;</span>
<span class="ln"> 9</span>   <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;messageService&#34;</span> <span class="na">class=</span><span class="s">&#34;com.example.MessageService&#34;</span><span class="nt">&gt;</span>
<span class="ln">10</span>      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;message&#34;</span> <span class="na">value=</span><span class="s">&#34;Hello, Spring!&#34;</span><span class="nt">/&gt;</span>
<span class="ln">11</span>   <span class="nt">&lt;/bean&gt;</span>
<span class="ln">12</span><span class="nt">&lt;/beans&gt;</span>
</code></pre></div><p><em>Code 5-7(c). &quot;MessageService.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.annotation.config</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MessageService</span> <span class="o">{</span>
<span class="ln"> 4</span>    <span class="kd">private</span> <span class="n">String</span> <span class="n">message</span><span class="o">;</span>
<span class="ln"> 5</span>
<span class="ln"> 6</span>    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getMessage</span><span class="o">()</span> <span class="o">{</span>
<span class="ln"> 7</span>        <span class="k">return</span> <span class="n">message</span><span class="o">;</span>
<span class="ln"> 8</span>    <span class="o">}</span>
<span class="ln"> 9</span>
<span class="ln">10</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">11</span>        <span class="k">this</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
<span class="ln">12</span>    <span class="o">}</span>
<span class="ln">13</span><span class="o">}</span>
</code></pre></div><p><em>Code 5-7(d). &quot;AppTest.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.annotation.config</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.AnnotationConfigApplicationContext</span><span class="o">;</span>
<span class="ln"> 4</span>
<span class="ln"> 5</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
<span class="ln"> 6</span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 7</span>        <span class="c1">// Load the Java configuration class
</span><span class="ln"> 8</span><span class="c1"></span>        <span class="n">AnnotationConfigApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnnotationConfigApplicationContext</span><span class="o">(</span><span class="n">AppConfig</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="ln"> 9</span>
<span class="ln">10</span>        <span class="c1">// Get the bean from the Spring context
</span><span class="ln">11</span><span class="c1"></span>        <span class="n">MessageService</span> <span class="n">messageService</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;messageService&#34;</span><span class="o">,</span> <span class="n">MessageService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="ln">12</span>
<span class="ln">13</span>        <span class="c1">// Use the bean
</span><span class="ln">14</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">messageService</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
<span class="ln">15</span>
<span class="ln">16</span>        <span class="c1">// Close the context
</span><span class="ln">17</span><span class="c1"></span>        <span class="n">context</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="ln">18</span>    <span class="o">}</span>
<span class="ln">19</span><span class="o">}</span>
</code></pre></div><p>The expected output of running Code 5-7(a, b, c, d) should be:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="ln">1</span>Hello, Spring!
</code></pre></div><h2 id="52--bean-annotations">5.2  Bean Annotations</h2>
<p>Below are some <em>bean annotations</em> that are commonly used in Spring applications:</p>
<h3 id="521-component-controller-repository-service">5.2.1 <code>@Component</code>, <code>@Controller</code>, <code>@Repository</code>, <code>@Service</code></h3>
<p>These are used to automatically <em>detect</em> and <em>register</em> beans with the Spring container during <em>component scanning</em>.</p>
<ul>
<li><code>@Component</code> indicates that the class is a <em>general-purpose</em> Spring component</li>
<li><code>@Controller</code> marks the class as a <em>Spring MVC controller</em></li>
<li><code>@Repository</code> indicates that the class is a <em>data repository</em> (<em>database operations</em>)</li>
<li><code>@Service</code>marks the class as a <em>service</em> bean dealing with <em>business logic</em></li>
</ul>
<p>For the reason of simplicity, I will reuse the <em>Code 5-3(b)</em> as the demo.</p>
<h3 id="522-autowired">5.2.2 <code>@Autowired</code></h3>
<p><code>@Autowired</code> annotation is used to automatically inject dependent beans into the target bean.</p>
<p><code>@Autowired</code> can be applied on <em>fields</em>, <em>setter methods</em>, and <em>constructors</em>.</p>
<p><em>Code 5-8. &quot;AutowiredField.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.autowired.field</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="ln"> 4</span>
<span class="ln"> 5</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Customer</span> <span class="o">{</span>
<span class="ln"> 6</span>   <span class="nd">@Autowired</span>
<span class="ln"> 7</span>   <span class="kd">private</span> <span class="n">Person</span> <span class="n">person</span><span class="o">;</span>
<span class="ln"> 8</span>
<span class="ln"> 9</span>   <span class="c1">// ...
</span><span class="ln">10</span><span class="c1"></span><span class="o">}</span>
</code></pre></div><p><em>Code 5-8</em> shows how to use the <code>@Autowired</code> annotation to automatically inject a bean into the <code>person</code> field of <code>Customer</code> class.</p>
<p><em>Code 5-9. &quot;AutowiredSetter.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.autowired.setter</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="ln"> 4</span>
<span class="ln"> 5</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Customer</span> <span class="o">{</span>
<span class="ln"> 6</span>    <span class="kd">private</span> <span class="n">Person</span> <span class="n">person</span><span class="o">;</span>
<span class="ln"> 7</span>
<span class="ln"> 8</span>    <span class="nd">@Autowired</span>
<span class="ln"> 9</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPerson</span><span class="o">(</span><span class="n">Person</span> <span class="n">person</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">10</span>        <span class="k">this</span><span class="o">.</span><span class="na">person</span> <span class="o">=</span> <span class="n">person</span><span class="o">;</span>
<span class="ln">11</span>    <span class="o">}</span>
<span class="ln">12</span>
<span class="ln">13</span>    <span class="c1">// ...
</span><span class="ln">14</span><span class="c1"></span><span class="o">}</span>
</code></pre></div><p><em>Code 5-9</em> shows how to use the <code>@Autowired</code> annotation to automatically inject a bean into the setter <code>setPerson()</code> of the <code>Customer</code> class. Spring tries to perform the <em>byType autowiring</em> on the method.</p>
<p><em>Code 5-10. &quot;AutowiredConstructor.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.autowired.constructor</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="ln"> 4</span>
<span class="ln"> 5</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Customer</span> <span class="o">{</span>
<span class="ln"> 6</span>    <span class="kd">private</span> <span class="n">Person</span> <span class="n">person</span><span class="o">;</span>
<span class="ln"> 7</span>
<span class="ln"> 8</span>    <span class="nd">@Autowired</span>
<span class="ln"> 9</span>    <span class="kd">public</span> <span class="nf">Customer</span><span class="o">(</span><span class="n">Person</span> <span class="n">person</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">10</span>        <span class="k">this</span><span class="o">.</span><span class="na">person</span> <span class="o">=</span> <span class="n">person</span><span class="o">;</span>
<span class="ln">11</span>    <span class="o">}</span>
<span class="ln">12</span>
<span class="ln">13</span>    <span class="c1">// ...
</span><span class="ln">14</span><span class="c1"></span><span class="o">}</span>
</code></pre></div><p><em>Code 5-10</em> shows how to use the <code>@Autowired</code> annotation to automatically inject a bean into the <em>constructor</em> of the <em>Customer</em> class. Note: only one constructor of any bean class can carry the <code>@Autowired</code> annotation.</p>
<h3 id="523-qualifier">5.2.3 <code>@Qualifier</code></h3>
<p>The <code>@Qualifier</code> annotation is used in conjunction with <code>@Autowired</code> to <em>resolve ambiguity</em> when multiple beans of the same type are available for injection.</p>
<p><em>Code 5-11(a). &quot;MessageService.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.annotation.qualifier</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MessageService</span> <span class="o">{</span>
<span class="ln"> 4</span>   <span class="kd">public</span> <span class="kt">void</span>  <span class="nf">sendMessage</span><span class="o">();</span>
<span class="ln"> 5</span><span class="o">}</span>
<span class="ln"> 6</span>
<span class="ln"> 7</span><span class="nd">@Component</span>
<span class="ln"> 8</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MailService</span> <span class="kd">implements</span> <span class="n">MessageService</span> <span class="o">{</span>
<span class="ln"> 9</span>   <span class="nd">@Override</span>
<span class="ln">10</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sendMessage</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">11</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Mail sent.&#34;</span><span class="o">);</span>
<span class="ln">12</span>   <span class="o">}</span>
<span class="ln">13</span><span class="o">}</span>
<span class="ln">14</span>
<span class="ln">15</span><span class="nd">@Component</span>
<span class="ln">16</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SmsService</span> <span class="kd">implements</span> <span class="n">MessageService</span> <span class="o">{</span>
<span class="ln">17</span>   <span class="nd">@Override</span>
<span class="ln">18</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sendMessage</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">19</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;SMS sent.&#34;</span><span class="o">);</span>
<span class="ln">20</span>   <span class="o">}</span>
<span class="ln">21</span><span class="o">}</span>
</code></pre></div><p><em>Code 5-11(a)</em> defines an interface <code>MessageService</code>, which declares a single method <code>sendMessage()</code>. The interface is then implemented by two classes, <code>MailService</code> and <code>SmsService</code>. These classes provide their own implementations of the <code>sendMessage()</code> method.</p>
<p><em>Code 5-11(b). &quot;App.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.annotation.qualifier</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Qualifier</span><span class="o">;</span>
<span class="ln"> 5</span><span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="o">;</span>
<span class="ln"> 6</span>
<span class="ln"> 7</span><span class="nd">@Component</span>
<span class="ln"> 8</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">App</span> <span class="o">{</span>
<span class="ln"> 9</span>
<span class="ln">10</span>   <span class="nd">@Autowired</span>
<span class="ln">11</span>   <span class="nd">@Qualifier</span><span class="o">(</span><span class="s">&#34;mailService&#34;</span><span class="o">)</span>
<span class="ln">12</span>   <span class="kd">private</span> <span class="n">MessageService</span> <span class="n">messageService</span><span class="o">;</span>
<span class="ln">13</span>
<span class="ln">14</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">action</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">15</span>      <span class="n">messageService</span><span class="o">.</span><span class="na">sendMessage</span><span class="o">();</span>
<span class="ln">16</span>   <span class="o">}</span>
<span class="ln">17</span><span class="o">}</span>
</code></pre></div><p><em>Code 5-11(b)</em> injects <code>mailService</code> into <code>messageService</code> by <code>@Qualifier</code> annotation. Note: the <code>MailService</code> class is annotated with <code>@Component</code>, which makes it a Spring <em>bean</em>. So the <em>default bean name</em> for <code>MailService</code> class would be <code>mailService</code> (with the first letter converted to lowercase).</p>
<h3 id="524-value">5.2.4 <code>@Value</code></h3>
<p><code>@Value</code> annotation is used to inject values from properties files, environment variables, or other sources directly into bean fields or constructor parameters.</p>
<p><em>Code 5-12. &quot;HelloService.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Value</span><span class="o">;</span>
<span class="ln"> 2</span><span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="o">;</span>
<span class="ln"> 3</span>
<span class="ln"> 4</span><span class="nd">@Component</span>
<span class="ln"> 5</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloService</span> <span class="o">{</span>
<span class="ln"> 6</span>    <span class="nd">@Value</span><span class="o">(</span><span class="s">&#34;Hello Spring Framework&#34;</span><span class="o">)</span>
<span class="ln"> 7</span>    <span class="kd">private</span> <span class="n">String</span> <span class="n">message</span><span class="o">;</span>
<span class="ln"> 8</span>
<span class="ln"> 9</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sayHello</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">10</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
<span class="ln">11</span>    <span class="o">}</span>
<span class="ln">12</span><span class="o">}</span>
</code></pre></div><p><em>Code 5-12</em> defines a Spring component class named <code>HelloService</code> with a field <code>message</code> that is initialized with the value &quot;Hello Spring Framework&quot; using the <code>@Value</code> annotation, and a method <code>sayHello()</code> to print the message to the console when called.</p>
<h3 id="525-scope">5.2.5 <code>@Scope</code></h3>
<p><code>@Scope</code> annotation is used to specify the the <em>scope</em> of a <code>@Component</code> class or a <code>@Bean</code> definition (just like <code>scope</code> field in <code>&lt;bean&gt;</code> tag), defining the <em>lifecycle</em> and <em>visibility</em> of the bean instance.</p>
<p>The default scope for a bean is <em>Singleton</em>, and we can define the scope of a bean as a Prototype using the <code>scope=&quot;prototype&quot;</code> attribute of the <code>&lt;bean&gt;</code> tag in the XML file or using <code>@Scope(value = ConfigurableBeanFactory.SCOPE_PROTOTYPE)</code> annotation, shown in <em>Code 5-13</em>.</p>
<p><em>Code 5-13. Snippet of &quot;AppConfig.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln">1</span><span class="nd">@Configuration</span>
<span class="ln">2</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppConfig</span> <span class="o">{</span>
<span class="ln">3</span>   <span class="nd">@Bean</span>
<span class="ln">4</span>   <span class="nd">@Scope</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="n">ConfigurableBeanFactory</span><span class="o">.</span><span class="na">SCOPE_PROTOTYPE</span><span class="o">)</span>
<span class="ln">5</span>   <span class="kd">public</span> <span class="n">MessageService</span> <span class="nf">messageService</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">6</span>      <span class="k">return</span> <span class="k">new</span> <span class="n">EmailMessageService</span><span class="o">();</span>
<span class="ln">7</span>   <span class="o">}</span>
<span class="ln">8</span><span class="o">}</span>
</code></pre></div><h3 id="526-postconstructand-predestroy">5.2.6 <code>@PostConstruct</code>and <code>@PreDestroy</code></h3>
<p><code>@PostConstruct</code> annotation is used to indicate a method (<code>init-method</code> field in <code>&lt;bean&gt;</code> tag) that should be executed <em>after</em> the bean has been initialized by the Spring container.</p>
<p><code>@PreDestroy</code> annotation is used to indicate a method (<code>destroy-method</code> field in <code>&lt;bean&gt;</code> tag) that should be executed just <em>before</em> the bean is destroyed by the Spring container.</p>
<p><em>Code 5-14(a). &quot;&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.ctordtor</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">javax.annotation.PostConstruct</span><span class="o">;</span>
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">javax.annotation.PreDestroy</span><span class="o">;</span>
<span class="ln"> 5</span>
<span class="ln"> 6</span><span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="o">;</span>
<span class="ln"> 7</span>
<span class="ln"> 8</span><span class="nd">@Component</span>
<span class="ln"> 9</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExampleBean</span> <span class="o">{</span>
<span class="ln">10</span>
<span class="ln">11</span>   <span class="nd">@PostConstruct</span>
<span class="ln">12</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">13</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Initializing bean...&#34;</span><span class="o">);</span>
<span class="ln">14</span>   <span class="o">}</span>
<span class="ln">15</span>
<span class="ln">16</span>   <span class="nd">@PreDestroy</span>
<span class="ln">17</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">cleanup</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">18</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Destroying bean...&#34;</span><span class="o">);</span>
<span class="ln">19</span>   <span class="o">}</span>
<span class="ln">20</span><span class="o">}</span>
</code></pre></div><p>Code 5-14(b). &quot;AppConfig.java&quot;</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.ctordtor</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.ComponentScan</span><span class="o">;</span>
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="ln"> 5</span>
<span class="ln"> 6</span><span class="nd">@Configuration</span>
<span class="ln"> 7</span><span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">basePackages</span> <span class="o">=</span> <span class="s">&#34;com.example.springdemo&#34;</span><span class="o">)</span>
<span class="ln"> 8</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppConfig</span> <span class="o">{</span>
<span class="ln"> 9</span>
<span class="ln">10</span><span class="o">}</span>
</code></pre></div><h3 id="527-lazy">5.2.7 <code>@Lazy</code></h3>
<p>The <code>@Lazy</code> annotation is used to <em>delay</em> the initialization of a bean until the first time it is <em>requested</em>.</p>
<p><em>Code 5-15. &quot;AppConfig.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.annotation.lazy</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="o">;</span>
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="ln"> 5</span><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Lazy</span><span class="o">;</span>
<span class="ln"> 6</span>
<span class="ln"> 7</span><span class="nd">@Configuration</span>
<span class="ln"> 8</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppConfig</span> <span class="o">{</span>
<span class="ln"> 9</span>
<span class="ln">10</span>   <span class="nd">@Lazy</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
<span class="ln">11</span>   <span class="nd">@Bean</span>
<span class="ln">12</span>   <span class="kd">public</span> <span class="n">FirstBean</span> <span class="nf">firstBeanLazy</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">13</span>      <span class="k">return</span> <span class="k">new</span> <span class="n">FirstBean</span><span class="o">();</span>
<span class="ln">14</span>   <span class="o">}</span>
<span class="ln">15</span>
<span class="ln">16</span>   <span class="nd">@Lazy</span>
<span class="ln">17</span>   <span class="nd">@Bean</span>
<span class="ln">18</span>   <span class="kd">public</span> <span class="n">SecondBean</span> <span class="nf">secondBeanLazy</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">19</span>      <span class="k">return</span> <span class="k">new</span> <span class="n">SecondBean</span><span class="o">();</span>
<span class="ln">20</span>   <span class="o">}</span>
<span class="ln">21</span>
<span class="ln">22</span>   <span class="nd">@Lazy</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
<span class="ln">23</span>   <span class="nd">@Bean</span>
<span class="ln">24</span>   <span class="kd">public</span> <span class="n">ThirdBean</span> <span class="nf">thirdBeanNotLazy</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">25</span>      <span class="k">return</span> <span class="k">new</span> <span class="n">ThirdBean</span><span class="o">();</span>
<span class="ln">26</span>   <span class="o">}</span>
<span class="ln">27</span>
<span class="ln">28</span>   <span class="nd">@Bean</span>
<span class="ln">29</span>   <span class="kd">public</span> <span class="n">FourthBean</span> <span class="nf">fourthBeanNotLazy</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">30</span>      <span class="k">return</span> <span class="k">new</span> <span class="n">FourthBean</span><span class="o">();</span>
<span class="ln">31</span>   <span class="o">}</span>
<span class="ln">32</span><span class="o">}</span>
</code></pre></div><p><em>Code 5-15</em> defines 4 beans: <code>firstBeanLazy</code> and <code>secondBeanLazy</code> will be lazily initialized, while <code>thirdBeanNotLazy</code> and <code>fourthBeanNotLazy</code> will be eagerly initialized during the application startup.</p>
<h3 id="528-primary">5.2.8 <code>@Primary</code></h3>
<p><code>@Primary</code> annotation is used to indicate a preferred bean when multiple beans of the same type are available for injection with <code>@Autowired</code>.</p>
<p><em>Code 5-16(a). Snippet of &quot;AppConfig.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="nd">@Configuration</span>
<span class="ln"> 2</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppConfig</span> <span class="o">{</span>
<span class="ln"> 3</span>
<span class="ln"> 4</span>    <span class="nd">@Bean</span>
<span class="ln"> 5</span>    <span class="kd">public</span> <span class="n">MessageService</span> <span class="nf">getEmailService</span><span class="o">()</span> <span class="o">{</span>
<span class="ln"> 6</span>        <span class="k">return</span> <span class="k">new</span> <span class="n">MessageService</span><span class="o">(</span><span class="s">&#34;Email&#34;</span><span class="o">);</span>
<span class="ln"> 7</span>    <span class="o">}</span>
<span class="ln"> 8</span>
<span class="ln"> 9</span>    <span class="nd">@Bean</span>
<span class="ln">10</span>    <span class="nd">@Primary</span>
<span class="ln">11</span>    <span class="kd">public</span> <span class="n">MessageService</span> <span class="nf">getSmsService</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">12</span>        <span class="k">return</span> <span class="k">new</span> <span class="n">MessageService</span><span class="o">(</span><span class="s">&#34;SMS&#34;</span><span class="o">);</span>
<span class="ln">13</span>    <span class="o">}</span>
<span class="ln">14</span><span class="o">}</span>
</code></pre></div><p><em>Code 5-16(a)</em> defines two <em>beans</em> (<code>MessageService</code> instances) with different type names (&quot;Email&quot; and &quot;SMS&quot;) and marks the return value of <code>getSmsService()</code> as the primary bean using the <code>@Primary</code> annotation.</p>
<p><em>Code 5-16(b). Snippet of &quot;MessageService.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln">1</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MessageService</span> <span class="o">{</span>
<span class="ln">2</span>   <span class="kd">private</span> <span class="n">String</span> <span class="n">type</span><span class="o">;</span>
<span class="ln">3</span>
<span class="ln">4</span>   <span class="kd">public</span> <span class="nf">MessageService</span><span class="o">(</span><span class="n">String</span> <span class="n">type</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">5</span>      <span class="k">this</span><span class="o">.</span><span class="na">type</span> <span class="o">=</span> <span class="n">type</span><span class="o">;</span>
<span class="ln">6</span>   <span class="o">}</span>
<span class="ln">7</span>
<span class="ln">8</span>   <span class="c1">// ...
</span><span class="ln">9</span><span class="c1"></span><span class="o">}</span>
</code></pre></div><p><em>Code 5-16(b)</em> declares the <code>MessageService</code> class with a constructor to set the type of <code>MessageService</code> when creating an instance.</p>
<h1 id="6-aop">6. AOP</h1>
<p><strong>Aspect-Oriented Programming</strong> (<strong>AOP</strong>) is a framework in Spring that allows breaking down program logic into separate concerns, which are conceptually independent from core business logic of the application, providing a way to <em>decouple</em> cross-cutting concerns from the objects they affect.</p>
<h2 id="61-aop-concepts">6.1 AOP Concepts</h2>
<p>The concepts shown in the table below are general terms that are related to AOP in a broader sense beyond Spring Framework.</p>
<p><em>Table 6-1. General Terms of AOP</em></p>
<table>
<thead>
<tr>
<th>Terms</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>Aspect</em></td>
<td>a module which has a set of APIs providing cross-cutting requirements</td>
</tr>
<tr>
<td><em>Target object</em></td>
<td>The object being advised by one or more aspects</td>
</tr>
<tr>
<td><em>Join point</em></td>
<td>a point in your application where you can plugin the AOP aspect</td>
</tr>
<tr>
<td><em>Pointcut</em></td>
<td>a set of one or more join points where an advice should be executed</td>
</tr>
<tr>
<td><em>Advice</em></td>
<td>the actual action to be taken either <em>before</em> or <em>after</em> the method execution</td>
</tr>
<tr>
<td><em>Introduction</em></td>
<td>allows you to add new methods or attributes to the existing classes.</td>
</tr>
<tr>
<td><em>Weaving</em></td>
<td>the process of linking aspects with other application types or objects to create an advised object</td>
</tr>
</tbody>
</table>
<p><strong>Spring AOP</strong> is a technique that modularizes cross-cutting concerns using <em>aspects</em>, which consist of <em>advice</em> and <em>pointcuts</em>. <em>Aspects</em> define specific behaviors, and <em>pointcuts</em> specify where these behaviors should be applied (e.g., method invocations).</p>
<p>During <em>runtime weaving</em>, the <em>advice</em> is applied to the <em>target objects</em> at the designated <em>join points</em>, effectively incorporating the desired functionalities into the application and improving code modularity.</p>
<p>Spring <em>aspects</em> can work with five kinds of advice mentioned:</p>
<p><em>Table 6-2. Types of Advice</em></p>
<table>
<thead>
<tr>
<th>Types of Advice</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>before</em></td>
<td>run <em>advice</em> <strong>before</strong> the execution of the <strong>method</strong></td>
</tr>
<tr>
<td><em>after</em></td>
<td>run <em>advice</em> <strong>after</strong> the execution of the <strong>method</strong></td>
</tr>
<tr>
<td><em>after-returning</em></td>
<td>run <em>advice</em> <strong>after</strong> the a method only if its execution is completed <strong>successfully</strong></td>
</tr>
<tr>
<td><em>after-throwing</em></td>
<td>run <em>advice</em> <strong>after</strong> the a method only if its execution throws <strong>exception</strong></td>
</tr>
<tr>
<td><em>around</em></td>
<td>run <em>advice</em> <strong>before</strong> and <strong>after</strong> the advised method is invoked</td>
</tr>
</tbody>
</table>
<h2 id="62-xml-schema-based-aop">6.2 XML Schema based AOP</h2>
<p><em>Aspects</em> can be implemented using the regular classes along with <strong>XML Schema based</strong> configuration. The basic structure for XML to config AOP looks like <em>Code 6-0</em>:</p>
<p><em>Code 6-0. Skeleton of AOP config in &quot;beans.xml&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="ln">1</span><span class="nt">&lt;aop:config&gt;</span>
<span class="ln">2</span>   <span class="nt">&lt;aop:aspect</span> <span class="na">id =</span> <span class="s">&#34;{AOP_ID}&#34;</span> <span class="na">ref =</span> <span class="s">&#34;{CONFIG_CLASS_lowerCammelNotation}&#34;</span><span class="nt">&gt;</span>
<span class="ln">3</span>      <span class="nt">&lt;aop:pointcut</span> <span class="na">id =</span> <span class="s">&#34;{POINTCUT_ID}&#34;</span> <span class="na">expression =</span> <span class="s">&#34;{POINTCUT_EXPRESSION}&#34;</span><span class="nt">/&gt;</span>
<span class="ln">4</span>         <span class="nt">&lt;aop:</span><span class="err">{ADVICE_NAME}</span> <span class="na">pointcut-ref =</span> <span class="s">&#34;{POINTCUT_ID}&#34;</span> <span class="na">method =</span> <span class="s">&#34;{CONFIG_CLASS_CERTAIN_METHOD}&#34;</span><span class="nt">/&gt;</span>
<span class="ln">5</span>         <span class="nt">&lt;aop:after-returning</span> <span class="na">pointcut-ref =</span> <span class="s">&#34;{POINTCUT_ID}&#34;</span> <span class="na">returning =</span> <span class="s">&#34;{RETURN_VAR_NAME}&#34;</span> <span class="na">method =</span> <span class="s">&#34;{CONFIG_CLASS_CERTAIN_METHOD}&#34;</span><span class="nt">/&gt;</span>
<span class="ln">6</span>         <span class="nt">&lt;aop:after-throwing</span>  <span class="na">pointcut-ref =</span> <span class="s">&#34;{POINTCUT_ID}&#34;</span> <span class="na">throwing =</span> <span class="s">&#34;{EXCEPTION_NAME}&#34;</span> <span class="na">method =</span> <span class="s">&#34;{CONFIG_CLASS_CERTAIN_METHOD}&#34;</span><span class="nt">/&gt;</span>
<span class="ln">7</span>   <span class="nt">&lt;/aop:aspect&gt;</span>
<span class="ln">8</span><span class="nt">&lt;/aop:config&gt;</span>
</code></pre></div><p><em>Code 6-0</em> shows how to config AOP:</p>
<ul>
<li>An <strong>aspect</strong> is declared using the <code>&lt;aop:aspect&gt;</code> element, and the backing bean is referenced using the <code>ref</code> attribute.</li>
<li>A <strong>pointcut</strong> is declared using the <code>&lt;aop:pointcut&gt;</code> element to determine the <em>join points</em> (i.e., methods) of interest to be executed with different advices.</li>
<li><strong>Advices</strong> can be declared inside <code>&lt;aop:aspect&gt;</code> tag using the element <code>&lt;aop:{ADVICE_NAME}&gt;</code>, such as <code>&lt;aop:before&gt;</code>, <code>&lt;aop:after&gt;</code>, <code>&lt;aop:after-returning&gt;</code>, <code>&lt;aop:after-throwing&gt;</code> and <code>&lt;aop:around&gt;</code>. (Please refer to <em>Table 6-1</em>).</li>
</ul>
<p><strong>PointCut Designator</strong> (<strong>PCD</strong>) is a keyword telling Spring AOP what to match.</p>
<ol>
<li><code>execution</code>(<em>primary Spring PCD</em>): matches method execution <em>join points</em></li>
<li><code>within</code>: limits matching to join points of certain types</li>
<li><code>this</code>: limits matching to join points where the <em>bean reference</em> is an instance of the given type (when Spring AOP creates a <em>CGLIB-based</em> proxy).</li>
<li><code>target</code>: limits matching to join points where the <em>target object</em> is an instance of the given type (when a <em>JDK-based</em> proxy is created).</li>
<li><code>args</code>: matches particular method arguments</li>
</ol>
<p><strong>Pointcut Expression</strong> looks like <code>expression = &quot;execution(* com.example.aop.*.*(..))&quot;</code>, in <code>expression</code> field of <code>&lt;aop:pointcut&gt;</code> tag:</p>
<ul>
<li>the <code>execution</code> is a Spring PCD</li>
<li>the first Asterisk Sign (<code>*</code>) in <code>execution(* </code> is a <em>wildcard character</em> that matches any <em>return type</em> of the intercepted method, e.g., <code>void</code>, <code>Integer</code>, <code>String</code>, etc.</li>
<li>the second asterisk (<code>*</code>) in <code>com.example.aop.*</code> is a <em>wildcard character</em> that matches <em>any class</em> in the <code>com.example.aop</code> package.</li>
<li>the dot and asterisk (<code>.*</code>) in <code>com.example.aop.*.*</code> is a <em>wildcard character</em> that matches <em>any method</em> with any name in the specified class.</li>
<li><code>(..)</code>is another <em>wildcard</em> that matches <em>any number of arguments</em> in the method. <code>(..)</code> means the method can take <em>zero or more</em> arguments.</li>
</ul>
<p><em>Code 6-1(a). &quot;Logging.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.aop</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Logging</span> <span class="o">{</span>
<span class="ln"> 4</span>
<span class="ln"> 5</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">beforeAdvice</span><span class="o">(){</span>
<span class="ln"> 6</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;`beforeAdvice()` invoked.&#34;</span><span class="o">);</span>
<span class="ln"> 7</span>    <span class="o">}</span>
<span class="ln"> 8</span>
<span class="ln"> 9</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterAdvice</span><span class="o">(){</span>
<span class="ln">10</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;`afterAdvice()` invoked.&#34;</span><span class="o">);</span>
<span class="ln">11</span>    <span class="o">}</span>
<span class="ln">12</span>
<span class="ln">13</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterReturningAdvice</span><span class="o">(</span><span class="n">Object</span> <span class="n">retVal</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">14</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;[Success] `afterReturningAdvice()` reads return value: &#34;</span> <span class="o">+</span> <span class="n">retVal</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span> <span class="o">);</span>
<span class="ln">15</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;------&#34;</span><span class="o">);</span>
<span class="ln">16</span>    <span class="o">}</span>
<span class="ln">17</span>
<span class="ln">18</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterThrowingAdvice</span><span class="o">(</span><span class="n">Exception</span> <span class="n">exception</span><span class="o">){</span>
<span class="ln">19</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;[FAILURE] `afterThrowingAdvice()` detects Exception: &#34;</span> <span class="o">+</span> <span class="n">exception</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
<span class="ln">20</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;------&#34;</span><span class="o">);</span>
<span class="ln">21</span>    <span class="o">}</span>
<span class="ln">22</span><span class="o">}</span>
</code></pre></div><p><em>Code 6-1(a)</em> represents an aspect in an AOP context, and it contains various <em>advice methods</em> that will be executed at specific <em>points</em> during the execution of the target methods in the application:</p>
<ul>
<li><code>beforeAdvice()</code> method will be executed before the target method is invoked.</li>
<li><code>afterAdvice()</code> method will be executed after the target method has been invoked, regardless of whether it completed successfully or threw an exception.</li>
<li><code>afterReturningAdvice(Object retVal)</code> method will be executed after the target method has <em>successfully completed</em> and returned a value. (The <code>retVal</code> parameter contains the value returned by the target method.)</li>
<li><code>afterThrowingAdvice(Exception exception)</code> method will be executed if the target method <em>throws an exception</em>. (The <code>exception</code> parameter contains the exception thrown by the target method.)</li>
</ul>
<p><em>Code 6-1(b). &quot;Student.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.aop</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Student</span> <span class="o">{</span>
<span class="ln"> 4</span>    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">age</span><span class="o">;</span>
<span class="ln"> 5</span>    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
<span class="ln"> 6</span>
<span class="ln"> 7</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setAge</span><span class="o">(</span><span class="n">Integer</span> <span class="n">age</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 8</span>        <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">age</span><span class="o">;</span>
<span class="ln"> 9</span>    <span class="o">}</span>
<span class="ln">10</span>    <span class="kd">public</span> <span class="n">Integer</span> <span class="nf">getAge</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">11</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Class method `getAge()` gets `age` = &#34;</span> <span class="o">+</span> <span class="n">age</span> <span class="o">);</span>
<span class="ln">12</span>        <span class="k">return</span> <span class="n">age</span><span class="o">;</span>
<span class="ln">13</span>    <span class="o">}</span>
<span class="ln">14</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">15</span>        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
<span class="ln">16</span>    <span class="o">}</span>
<span class="ln">17</span>    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">18</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Class method `getName()` gets `name` = &#34;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">);</span>
<span class="ln">19</span>        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
<span class="ln">20</span>    <span class="o">}</span>
<span class="ln">21</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">throwsException</span><span class="o">(){</span>
<span class="ln">22</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Class method `throwsException()` will throw &#39;IllegalArgumentException&#39;&#34;</span><span class="o">);</span>
<span class="ln">23</span>        <span class="k">if</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span>
<span class="ln">24</span>         <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">();</span> <span class="c1">// For Test
</span><span class="ln">25</span><span class="c1"></span>    <span class="o">}</span>
<span class="ln">26</span><span class="o">}</span>
</code></pre></div><p>In <em>Code 6-1(b)</em>, <code>Student</code> class has <em>getters</em>/<em>setters</em> for <code>age</code> and <code>name</code> properties, and also has the <code>throwsException()</code> method, which will throw an <code>IllegalArgumentException</code> to demonstrate how AOP and exception handling work together.</p>
<p><em>Code 6-1(c). &quot;AopDemoTest.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.aop</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.springframework.context.ApplicationContext</span><span class="o">;</span>
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">org.springframework.context.support.ClassPathXmlApplicationContext</span><span class="o">;</span>
<span class="ln"> 5</span>
<span class="ln"> 6</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AopDemoTest</span> <span class="o">{</span>
<span class="ln"> 7</span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 8</span>        <span class="n">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;beans.xml&#34;</span><span class="o">);</span>
<span class="ln"> 9</span>
<span class="ln">10</span>        <span class="n">Student</span> <span class="n">student</span> <span class="o">=</span> <span class="o">(</span><span class="n">Student</span><span class="o">)</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;student&#34;</span><span class="o">);</span>
<span class="ln">11</span>        <span class="n">student</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>
<span class="ln">12</span>        <span class="n">student</span><span class="o">.</span><span class="na">getAge</span><span class="o">();</span>
<span class="ln">13</span>        <span class="n">student</span><span class="o">.</span><span class="na">throwsException</span><span class="o">();</span>
<span class="ln">14</span>    <span class="o">}</span>
<span class="ln">15</span><span class="o">}</span>
</code></pre></div><p><em>Code 6-1(c)</em> contains the main method that demonstrates the usage of AOP.</p>
<p><em>Code 6-1(d). &quot;beans.xml&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="ln"> 1</span><span class="cp">&lt;?xml version = &#34;1.0&#34; encoding = &#34;UTF-8&#34;?&gt;</span>
<span class="ln"> 2</span><span class="nt">&lt;beans</span> <span class="na">xmlns =</span> <span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
<span class="ln"> 3</span>   <span class="na">xmlns:xsi =</span> <span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span> 
<span class="ln"> 4</span>   <span class="na">xmlns:aop =</span> <span class="s">&#34;http://www.springframework.org/schema/aop&#34;</span>
<span class="ln"> 5</span>   <span class="na">xsi:schemaLocation =</span> <span class="s">&#34;http://www.springframework.org/schema/beans
</span><span class="ln"> 6</span><span class="s">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
</span><span class="ln"> 7</span><span class="s">   http://www.springframework.org/schema/aop 
</span><span class="ln"> 8</span><span class="s">   http://www.springframework.org/schema/aop/spring-aop-3.0.xsd &#34;</span><span class="nt">&gt;</span>
<span class="ln"> 9</span>
<span class="ln">10</span>    <span class="c">&lt;!-- Bean definition for student --&gt;</span>
<span class="ln">11</span>    <span class="nt">&lt;bean</span> <span class="na">id =</span> <span class="s">&#34;student&#34;</span> <span class="na">class =</span> <span class="s">&#34;com.example.aop.Student&#34;</span><span class="nt">&gt;</span>
<span class="ln">12</span>        <span class="nt">&lt;property</span> <span class="na">name =</span> <span class="s">&#34;name&#34;</span> <span class="na">value =</span> <span class="s">&#34;Tom&#34;</span> <span class="nt">/&gt;</span>
<span class="ln">13</span>        <span class="nt">&lt;property</span> <span class="na">name =</span> <span class="s">&#34;age&#34;</span> <span class="na">value =</span> <span class="s">&#34;83&#34;</span><span class="nt">/&gt;</span>
<span class="ln">14</span>    <span class="nt">&lt;/bean&gt;</span>
<span class="ln">15</span>
<span class="ln">16</span>    <span class="c">&lt;!-- Bean definition for logging aspect --&gt;</span>
<span class="ln">17</span>    <span class="nt">&lt;bean</span> <span class="na">id =</span> <span class="s">&#34;logging&#34;</span> <span class="na">class =</span> <span class="s">&#34;com.example.aop.Logging&#34;</span><span class="nt">/&gt;</span>
<span class="ln">18</span>
<span class="ln">19</span>    <span class="c">&lt;!-- AOP Configurations --&gt;</span>
<span class="ln">20</span>    <span class="nt">&lt;aop:config&gt;</span>
<span class="ln">21</span>        <span class="c">&lt;!--
</span><span class="ln">22</span><span class="c">           `&lt;aop:aspect id = &#34;log&#34;&gt;`: defines an aspect named &#34;log&#34; 
</span><span class="ln">23</span><span class="c">            `ref = &#34;logging&#34;`:  refer to the bean named &#34;logging&#34;, 
</span><span class="ln">24</span><span class="c">                                   representing the &#34;Logging.java&#34; aspect
</span><span class="ln">25</span><span class="c">        --&gt;</span>
<span class="ln">26</span>        <span class="nt">&lt;aop:aspect</span> <span class="na">id =</span> <span class="s">&#34;log&#34;</span> <span class="na">ref =</span> <span class="s">&#34;logging&#34;</span><span class="nt">&gt;</span>
<span class="ln">27</span>            <span class="c">&lt;!-- 
</span><span class="ln">28</span><span class="c">               A pointcut named &#34;selectAll&#34; is defined using an `expression` 
</span><span class="ln">29</span><span class="c">                  to target *all methods* 
</span><span class="ln">30</span><span class="c">                     within the package &#34;com.example.aop&#34; and its sub-packages. 
</span><span class="ln">31</span><span class="c">            --&gt;</span>
<span class="ln">32</span>            <span class="nt">&lt;aop:pointcut</span> <span class="na">id =</span> <span class="s">&#34;selectAll&#34;</span>
<span class="ln">33</span>                          <span class="na">expression =</span> <span class="s">&#34;execution(* com.example.aop.*.*(..))&#34;</span><span class="nt">/&gt;</span>
<span class="ln">34</span>
<span class="ln">35</span>            <span class="c">&lt;!--
</span><span class="ln">36</span><span class="c">               Associates the &#34;beforeAdvice()&#34; method 
</span><span class="ln">37</span><span class="c">                  with the &#34;selectAll&#34; pointcut
</span><span class="ln">38</span><span class="c">                     to be executed **before** the target methods
</span><span class="ln">39</span><span class="c">            --&gt;</span>
<span class="ln">40</span>            <span class="nt">&lt;aop:before</span> <span class="na">pointcut-ref =</span> <span class="s">&#34;selectAll&#34;</span> <span class="na">method =</span> <span class="s">&#34;beforeAdvice&#34;</span><span class="nt">/&gt;</span>
<span class="ln">41</span>            
<span class="ln">42</span>            <span class="c">&lt;!--  
</span><span class="ln">43</span><span class="c">               Associates the &#34;afterAdvice()&#34; method 
</span><span class="ln">44</span><span class="c">                  with the &#34;selectAll&#34; pointcut 
</span><span class="ln">45</span><span class="c">                     to be executed **after** the target methods.
</span><span class="ln">46</span><span class="c">            --&gt;</span>
<span class="ln">47</span>            <span class="nt">&lt;aop:after</span> <span class="na">pointcut-ref =</span> <span class="s">&#34;selectAll&#34;</span> <span class="na">method =</span> <span class="s">&#34;afterAdvice&#34;</span><span class="nt">/&gt;</span>
<span class="ln">48</span>
<span class="ln">49</span>            <span class="c">&lt;!--
</span><span class="ln">50</span><span class="c">               Associates the &#34;afterReturningAdvice()&#34; method 
</span><span class="ln">51</span><span class="c">                  with the &#34;selectAll&#34; pointcut 
</span><span class="ln">52</span><span class="c">                     to be executed after the **successful return** of the target methods.
</span><span class="ln">53</span><span class="c">                     
</span><span class="ln">54</span><span class="c">               The returning value will be the parameter for `afterReturningAdvice()`.
</span><span class="ln">55</span><span class="c">            --&gt;</span>
<span class="ln">56</span>            <span class="nt">&lt;aop:after-returning</span> <span class="na">pointcut-ref =</span> <span class="s">&#34;selectAll&#34;</span>
<span class="ln">57</span>                                 <span class="na">returning =</span> <span class="s">&#34;retVal&#34;</span> <span class="na">method =</span> <span class="s">&#34;afterReturningAdvice&#34;</span><span class="nt">/&gt;</span>
<span class="ln">58</span>
<span class="ln">59</span>            <span class="c">&lt;!--
</span><span class="ln">60</span><span class="c">               Associates the &#34;afterThrowingAdvice()&#34; method 
</span><span class="ln">61</span><span class="c">                  with the &#34;selectAll&#34; pointcut
</span><span class="ln">62</span><span class="c">                     to be executed if the target methods throw an exception.
</span><span class="ln">63</span><span class="c">               The Exception object will be the parameter for `afterThrowingAdvice()`.
</span><span class="ln">64</span><span class="c">            --&gt;</span>
<span class="ln">65</span>            <span class="nt">&lt;aop:after-throwing</span> <span class="na">pointcut-ref =</span> <span class="s">&#34;selectAll&#34;</span>
<span class="ln">66</span>                                <span class="na">throwing =</span> <span class="s">&#34;exception&#34;</span> <span class="na">method =</span> <span class="s">&#34;afterThrowingAdvice&#34;</span><span class="nt">/&gt;</span>
<span class="ln">67</span>
<span class="ln">68</span>        <span class="nt">&lt;/aop:aspect&gt;</span>
<span class="ln">69</span>    <span class="nt">&lt;/aop:config&gt;</span>
<span class="ln">70</span>
<span class="ln">71</span><span class="nt">&lt;/beans&gt;</span>
</code></pre></div><p><em>Code 6-1(d)</em> shows how to config Spring AOP.</p>
<p>The expected output for <em>Code 6-1(a, b, c, d)</em> is:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="ln"> 1</span>`beforeAdvice()` invoked.
<span class="ln"> 2</span>Class method `getName()` gets `name` = Tom
<span class="ln"> 3</span>`afterAdvice()` invoked.
<span class="ln"> 4</span>[Success] `afterReturningAdvice()` reads return value: Tom
<span class="ln"> 5</span>------
<span class="ln"> 6</span>`beforeAdvice()` invoked.
<span class="ln"> 7</span>Class method `getAge()` gets `age` = 83
<span class="ln"> 8</span>`afterAdvice()` invoked.
<span class="ln"> 9</span>[Success] `afterReturningAdvice()` reads return value: 83
<span class="ln">10</span>------
<span class="ln">11</span>`beforeAdvice()` invoked.
<span class="ln">12</span>Class method `throwsException()` will throw &#39;IllegalArgumentException&#39;
<span class="ln">13</span>`afterAdvice()` invoked.
<span class="ln">14</span>[FAILURE] `afterThrowingAdvice()` detects Exception: java.lang.IllegalArgumentException
<span class="ln">15</span>------
<span class="ln">16</span>Exception in thread &#34;main&#34; java.lang.IllegalArgumentException
<span class="ln">17</span>	at com.example.aop.Student.throwsException(Student.java:23)
<span class="ln">18</span>	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
<span class="ln">19</span>	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
<span class="ln">20</span>   (Omit the rest 22-line-long Exception message...)
</code></pre></div><p><em>Code 6-1(e). &quot;beans.xml&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="ln"> 1</span><span class="cp">&lt;?xml version = &#34;1.0&#34; encoding = &#34;UTF-8&#34;?&gt;</span>
<span class="ln"> 2</span><span class="nt">&lt;beans</span> <span class="na">xmlns =</span> <span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
<span class="ln"> 3</span>   <span class="na">xmlns:xsi =</span> <span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span> 
<span class="ln"> 4</span>   <span class="na">xmlns:aop =</span> <span class="s">&#34;http://www.springframework.org/schema/aop&#34;</span>
<span class="ln"> 5</span>   <span class="na">xsi:schemaLocation =</span> <span class="s">&#34;http://www.springframework.org/schema/beans
</span><span class="ln"> 6</span><span class="s">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
</span><span class="ln"> 7</span><span class="s">   http://www.springframework.org/schema/aop 
</span><span class="ln"> 8</span><span class="s">   http://www.springframework.org/schema/aop/spring-aop-3.0.xsd &#34;</span><span class="nt">&gt;</span>
<span class="ln"> 9</span>
<span class="ln">10</span>    <span class="c">&lt;!-- Definition for student bean --&gt;</span>
<span class="ln">11</span>    <span class="nt">&lt;bean</span> <span class="na">id =</span> <span class="s">&#34;student&#34;</span> <span class="na">class =</span> <span class="s">&#34;com.example.aop.Student&#34;</span><span class="nt">&gt;</span>
<span class="ln">12</span>        <span class="nt">&lt;property</span> <span class="na">name =</span> <span class="s">&#34;name&#34;</span> <span class="na">value =</span> <span class="s">&#34;Jerry&#34;</span> <span class="nt">/&gt;</span>
<span class="ln">13</span>        <span class="nt">&lt;property</span> <span class="na">name =</span> <span class="s">&#34;age&#34;</span> <span class="na">value =</span> <span class="s">&#34;83&#34;</span><span class="nt">/&gt;</span>
<span class="ln">14</span>    <span class="nt">&lt;/bean&gt;</span>
<span class="ln">15</span>
<span class="ln">16</span>    <span class="c">&lt;!-- Definition for logging aspect --&gt;</span>
<span class="ln">17</span>    <span class="nt">&lt;bean</span> <span class="na">id =</span> <span class="s">&#34;logging&#34;</span> <span class="na">class =</span> <span class="s">&#34;com.example.aop.Logging&#34;</span><span class="nt">/&gt;</span>
<span class="ln">18</span>
<span class="ln">19</span>    <span class="c">&lt;!-- AOP Configurations --&gt;</span>
<span class="ln">20</span>    <span class="nt">&lt;aop:config&gt;</span>
<span class="ln">21</span>        <span class="nt">&lt;aop:aspect</span> <span class="na">id =</span> <span class="s">&#34;log&#34;</span> <span class="na">ref =</span> <span class="s">&#34;logging&#34;</span><span class="nt">&gt;</span>
<span class="ln">22</span>
<span class="ln">23</span>            <span class="c">&lt;!--
</span><span class="ln">24</span><span class="c">               A pointcut named &#34;selectGetName&#34; using an expression
</span><span class="ln">25</span><span class="c">                  to target the `getName()` method of the `Student` class.
</span><span class="ln">26</span><span class="c">
</span><span class="ln">27</span><span class="c">               Note: `(..)` is a wildcard that 
</span><span class="ln">28</span><span class="c">                        represents zero or more arguments of any type.
</span><span class="ln">29</span><span class="c">            --&gt;</span>
<span class="ln">30</span>            <span class="nt">&lt;aop:pointcut</span> <span class="na">id =</span> <span class="s">&#34;selectGetName&#34;</span>
<span class="ln">31</span>                          <span class="na">expression =</span> <span class="s">&#34;execution(* com.example.aop.Student.getName(..))&#34;</span><span class="nt">/&gt;</span>
<span class="ln">32</span>
<span class="ln">33</span>            <span class="nt">&lt;aop:before</span> <span class="na">pointcut-ref =</span> <span class="s">&#34;selectGetName&#34;</span> <span class="na">method =</span> <span class="s">&#34;beforeAdvice&#34;</span><span class="nt">/&gt;</span>
<span class="ln">34</span>            <span class="nt">&lt;aop:after</span> <span class="na">pointcut-ref =</span> <span class="s">&#34;selectGetName&#34;</span> <span class="na">method =</span> <span class="s">&#34;afterAdvice&#34;</span><span class="nt">/&gt;</span>
<span class="ln">35</span>            <span class="nt">&lt;aop:after-returning</span> <span class="na">pointcut-ref =</span> <span class="s">&#34;selectGetName&#34;</span>
<span class="ln">36</span>                                 <span class="na">returning =</span> <span class="s">&#34;retVal&#34;</span> <span class="na">method =</span> <span class="s">&#34;afterReturningAdvice&#34;</span><span class="nt">/&gt;</span>
<span class="ln">37</span>            <span class="nt">&lt;aop:after-throwing</span> <span class="na">pointcut-ref =</span> <span class="s">&#34;selectGetName&#34;</span>
<span class="ln">38</span>                                <span class="na">throwing =</span> <span class="s">&#34;exception&#34;</span> <span class="na">method =</span> <span class="s">&#34;afterThrowingAdvice&#34;</span><span class="nt">/&gt;</span>
<span class="ln">39</span>
<span class="ln">40</span>        <span class="nt">&lt;/aop:aspect&gt;</span>
<span class="ln">41</span>    <span class="nt">&lt;/aop:config&gt;</span>
<span class="ln">42</span>
<span class="ln">43</span><span class="nt">&lt;/beans&gt;</span>
</code></pre></div><p><em>Code 6-1(e)</em> looks like <em>Code 6-1(d)</em>, except for the element <code>&lt;aop:pointcut id = &quot;selectGetName&quot; expression = &quot;execution(* com.example.aop.Student.getName(..))&quot;/&gt;</code>, which targets only on the method <code>Student.getName()</code> rather than all methods in the <code>Student</code> class.</p>
<p>The expected output for <em>Code 6-1(a, b, c, e)</em> is:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="ln"> 1</span>`beforeAdvice()` invoked.
<span class="ln"> 2</span>Class method `getName()` gets `name` = Tom
<span class="ln"> 3</span>[Success] `afterReturningAdvice()` reads return value: Tom
<span class="ln"> 4</span>------
<span class="ln"> 5</span>`afterAdvice()` invoked.
<span class="ln"> 6</span>Class method `getAge()` gets `age` = 83
<span class="ln"> 7</span>Class method `throwsException()` will throw &#39;IllegalArgumentException&#39;
<span class="ln"> 8</span>Exception in thread &#34;main&#34; java.lang.IllegalArgumentException
<span class="ln"> 9</span>	at com.example.aop.Student.throwsException(Student.java:23)
<span class="ln">10</span>	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
<span class="ln">11</span>	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
<span class="ln">12</span>	(Omit the rest 10-line-long Exception message...)
</code></pre></div><h2 id="63-aspectj-based-aop">6.3 AspectJ based AOP</h2>
<p><strong>AspectJ</strong> refers declaring aspects as regular Java classes with Java 5 annotations.</p>
<p>First, the &quot;beans.xml&quot; need to be modified with <code>&lt;aop:aspectj-autoproxy/&gt;</code> tag, shown in <em>Code 6-2</em>.</p>
<p><em>Code 6-2. &quot;beans.xml&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="ln"> 1</span><span class="cp">&lt;?xml version = &#34;1.0&#34; encoding = &#34;UTF-8&#34;?&gt;</span>
<span class="ln"> 2</span><span class="nt">&lt;beans</span> <span class="na">xmlns =</span> <span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
<span class="ln"> 3</span>   <span class="na">xmlns:xsi =</span> <span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span> 
<span class="ln"> 4</span>   <span class="na">xmlns:aop =</span> <span class="s">&#34;http://www.springframework.org/schema/aop&#34;</span>
<span class="ln"> 5</span>   <span class="na">xsi:schemaLocation =</span> <span class="s">&#34;http://www.springframework.org/schema/beans
</span><span class="ln"> 6</span><span class="s">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
</span><span class="ln"> 7</span><span class="s">   http://www.springframework.org/schema/aop 
</span><span class="ln"> 8</span><span class="s">   http://www.springframework.org/schema/aop/spring-aop-3.0.xsd &#34;</span><span class="nt">&gt;</span>
<span class="ln"> 9</span>
<span class="ln">10</span>   <span class="c">&lt;!-- AOP Configurations --&gt;</span>
<span class="ln">11</span>   <span class="nt">&lt;aop:aspectj-autoproxy/&gt;</span>
<span class="ln">12</span>
<span class="ln">13</span>   <span class="c">&lt;!-- Bean definition for student --&gt;</span>
<span class="ln">14</span>   <span class="nt">&lt;bean</span> <span class="na">id =</span> <span class="s">&#34;student&#34;</span> <span class="na">class =</span> <span class="s">&#34;com.example.aop.Student&#34;</span><span class="nt">&gt;</span>
<span class="ln">15</span>      <span class="nt">&lt;property</span> <span class="na">name =</span> <span class="s">&#34;name&#34;</span> <span class="na">value =</span> <span class="s">&#34;Tom&#34;</span> <span class="nt">/&gt;</span>
<span class="ln">16</span>      <span class="nt">&lt;property</span> <span class="na">name =</span> <span class="s">&#34;age&#34;</span> <span class="na">value =</span> <span class="s">&#34;83&#34;</span><span class="nt">/&gt;</span>
<span class="ln">17</span>   <span class="nt">&lt;/bean&gt;</span>
<span class="ln">18</span>
<span class="ln">19</span>   <span class="c">&lt;!-- Bean definition for logging aspect --&gt;</span>
<span class="ln">20</span>   <span class="nt">&lt;bean</span> <span class="na">id =</span> <span class="s">&#34;logging&#34;</span> <span class="na">class =</span> <span class="s">&#34;com.example.aop.Logging&#34;</span><span class="nt">/&gt;</span>
<span class="ln">21</span>   
<span class="ln">22</span><span class="nt">&lt;/beans&gt;</span>
</code></pre></div><p><em>Code 6-2</em> shows how to use <code>&lt;aop:aspectj-autoproxy/&gt;</code> tag to simplify AOP configuration.</p>
<p>Then I will rewrite the <em>Code 6-1(a, c)</em> to show how to use <em>AspectJ</em>. To declare <strong>Pointcuts</strong> and <strong>Advices</strong>, rewrite <em>Code 6-1(a)</em> to <em>Code 6-1-AOP(a)</em>:</p>
<p><em>Code 6-1-AOP(a). &quot;Logging.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.aop</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Aspect</span><span class="o">;</span>
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Pointcut</span><span class="o">;</span>
<span class="ln"> 5</span><span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Before</span><span class="o">;</span>
<span class="ln"> 6</span><span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.After</span><span class="o">;</span>
<span class="ln"> 7</span><span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.AfterThrowing</span><span class="o">;</span>
<span class="ln"> 8</span><span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.AfterReturning</span><span class="o">;</span>
<span class="ln"> 9</span><span class="c1">// import org.aspectj.lang.annotation.Around;
</span><span class="ln">10</span><span class="c1"></span>
<span class="ln">11</span><span class="nd">@Aspect</span>
<span class="ln">12</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Logging</span> <span class="o">{</span>
<span class="ln">13</span>
<span class="ln">14</span>   <span class="cm">/*
</span><span class="ln">15</span><span class="cm">      A pointcut named &#34;selectAll&#34; is defined using `@Pointcut` 
</span><span class="ln">16</span><span class="cm">                  to target *all methods* 
</span><span class="ln">17</span><span class="cm">                     within the package &#34;com.example.aop&#34; and its sub-packages. 
</span><span class="ln">18</span><span class="cm">      the method `selectAll()` is just a signature
</span><span class="ln">19</span><span class="cm">   */</span>
<span class="ln">20</span>   <span class="nd">@Pointcut</span><span class="o">(</span><span class="s">&#34;execution(* com.example.aop.*.*(..))&#34;</span><span class="o">)</span>
<span class="ln">21</span>   <span class="kd">private</span> <span class="kt">void</span> <span class="nf">selectAll</span><span class="o">(){}</span>
<span class="ln">22</span>
<span class="ln">23</span>   <span class="nd">@Before</span><span class="o">(</span><span class="s">&#34;selectAll()&#34;</span><span class="o">)</span>
<span class="ln">24</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">beforeAdvice</span><span class="o">(){</span>
<span class="ln">25</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;`beforeAdvice()` invoked.&#34;</span><span class="o">);</span>
<span class="ln">26</span>   <span class="o">}</span>
<span class="ln">27</span>
<span class="ln">28</span>   <span class="nd">@After</span><span class="o">(</span><span class="s">&#34;selectAll()&#34;</span><span class="o">)</span>
<span class="ln">29</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterAdvice</span><span class="o">(){</span>
<span class="ln">30</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;`afterAdvice()` invoked.&#34;</span><span class="o">);</span>
<span class="ln">31</span>   <span class="o">}</span>
<span class="ln">32</span>
<span class="ln">33</span>   <span class="nd">@AfterReturning</span><span class="o">(</span><span class="n">pointcut</span> <span class="o">=</span> <span class="s">&#34;selectAll()&#34;</span><span class="o">,</span> <span class="n">returning</span> <span class="o">=</span> <span class="s">&#34;retVal&#34;</span><span class="o">)</span>
<span class="ln">34</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterReturningAdvice</span><span class="o">(</span><span class="n">Object</span> <span class="n">retVal</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">35</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;[Success] `afterReturningAdvice()` reads return value: &#34;</span> <span class="o">+</span> <span class="n">retVal</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span> <span class="o">);</span>
<span class="ln">36</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;------&#34;</span><span class="o">);</span>
<span class="ln">37</span>   <span class="o">}</span>
<span class="ln">38</span>
<span class="ln">39</span>   <span class="nd">@AfterThrowing</span><span class="o">(</span><span class="n">pointcut</span> <span class="o">=</span> <span class="s">&#34;selectAll()&#34;</span><span class="o">,</span> <span class="n">throwing</span> <span class="o">=</span> <span class="s">&#34;exception&#34;</span><span class="o">)</span>
<span class="ln">40</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterThrowingAdvice</span><span class="o">(</span><span class="n">Exception</span> <span class="n">exception</span><span class="o">){</span>
<span class="ln">41</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;[FAILURE] `afterThrowingAdvice()` detects Exception: &#34;</span> <span class="o">+</span> <span class="n">exception</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
<span class="ln">42</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;------&#34;</span><span class="o">);</span>
<span class="ln">43</span>   <span class="o">}</span>
<span class="ln">44</span><span class="o">}</span>
</code></pre></div><p><em>Code 6-1-AOP(a)</em> defines an <em>AspectJ</em> aspect named <code>Logging</code>, which contains advice methods (<code>@Before</code>, <code>@After</code>, <code>@AfterReturning</code>, <code>@AfterThrowing</code>) to log messages before and after the execution of <em>all methods</em> in the package &quot;com.example.aop&quot; and its sub-packages, as well as handling method return values and exceptions.</p>
<p>Note: in XML Schema based AOP, we use <code>&lt;aop:pointcut id = &quot;POINTCUT_NAME&quot; expression = &quot;POINTCUT_EXPRESSION&quot;</code>; in AspectJ based AOP, we use <code>@Pointcut(&quot;POINTCUT_EXPRESSION&quot;)</code> annotation on an empty method called <code>private void POINTCUT_NAME(){}</code>.</p>
<p>The expected output for <em>Code 6-1-AOP(a)</em>, <em>Code 6-1(b, c)</em>, and <em>Code 6-2</em> should be:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="ln"> 1</span>`beforeAdvice()` invoked.
<span class="ln"> 2</span>Class method `getName()` gets `name` = Tom
<span class="ln"> 3</span>[Success] `afterReturningAdvice()` reads return value: Tom
<span class="ln"> 4</span>------
<span class="ln"> 5</span>`afterAdvice()` invoked.
<span class="ln"> 6</span>`beforeAdvice()` invoked.
<span class="ln"> 7</span>Class method `getAge()` gets `age` = 83
<span class="ln"> 8</span>[Success] `afterReturningAdvice()` reads return value: 83
<span class="ln"> 9</span>------
<span class="ln">10</span>`afterAdvice()` invoked.
<span class="ln">11</span>`beforeAdvice()` invoked.
<span class="ln">12</span>Class method `throwsException()` will throw &#39;IllegalArgumentException&#39;
<span class="ln">13</span>[FAILURE] `afterThrowingAdvice()` detects Exception: java.lang.IllegalArgumentException
<span class="ln">14</span>------
<span class="ln">15</span>`afterAdvice()` invoked.
<span class="ln">16</span>Exception in thread &#34;main&#34; java.lang.IllegalArgumentException
<span class="ln">17</span>	at com.example.aop.Student.throwsException(Student.java:26)
<span class="ln">18</span>   (Omit the rest Exception message...)
</code></pre></div><p>And if we want to target the Pointcut to <code>Student.getName()</code> method only, we can modify <em>Code 6-1-AOP(a)</em> to <em>Code 6-1-AOP-selectGetName(a)</em>:</p>
<p><em>Code 6-1-AOP-selectGetName(a). &quot;Logging.java&quot;</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kn">package</span> <span class="nn">com.example.aop</span><span class="o">;</span>
<span class="ln"> 2</span>
<span class="ln"> 3</span><span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Aspect</span><span class="o">;</span>
<span class="ln"> 4</span><span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Pointcut</span><span class="o">;</span>
<span class="ln"> 5</span><span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Before</span><span class="o">;</span>
<span class="ln"> 6</span><span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.After</span><span class="o">;</span>
<span class="ln"> 7</span><span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.AfterThrowing</span><span class="o">;</span>
<span class="ln"> 8</span><span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.AfterReturning</span><span class="o">;</span>
<span class="ln"> 9</span><span class="c1">// import org.aspectj.lang.annotation.Around;
</span><span class="ln">10</span><span class="c1"></span>
<span class="ln">11</span><span class="nd">@Aspect</span>
<span class="ln">12</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Logging</span> <span class="o">{</span>
<span class="ln">13</span>
<span class="ln">14</span>   <span class="cm">/*
</span><span class="ln">15</span><span class="cm">      A pointcut named &#34;selectGetName&#34; using an expression
</span><span class="ln">16</span><span class="cm">         to target the `getName()` method of the `Student` class.
</span><span class="ln">17</span><span class="cm">
</span><span class="ln">18</span><span class="cm">      Note: `(..)` is a wildcard that 
</span><span class="ln">19</span><span class="cm">               represents zero or more arguments of any type.
</span><span class="ln">20</span><span class="cm">   */</span>
<span class="ln">21</span>   <span class="nd">@Pointcut</span><span class="o">(</span><span class="s">&#34;execution(* com.example.aop.Student.getName(..))&#34;</span><span class="o">)</span>
<span class="ln">22</span>   <span class="kd">private</span> <span class="kt">void</span> <span class="nf">selectGetName</span><span class="o">(){}</span>
<span class="ln">23</span>
<span class="ln">24</span>   <span class="nd">@Before</span><span class="o">(</span><span class="s">&#34;selectGetName()&#34;</span><span class="o">)</span>
<span class="ln">25</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">beforeAdvice</span><span class="o">(){</span>
<span class="ln">26</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;`beforeAdvice()` invoked.&#34;</span><span class="o">);</span>
<span class="ln">27</span>   <span class="o">}</span>
<span class="ln">28</span>
<span class="ln">29</span>   <span class="nd">@After</span><span class="o">(</span><span class="s">&#34;selectGetName()&#34;</span><span class="o">)</span>
<span class="ln">30</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterAdvice</span><span class="o">(){</span>
<span class="ln">31</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;`afterAdvice()` invoked.&#34;</span><span class="o">);</span>
<span class="ln">32</span>   <span class="o">}</span>
<span class="ln">33</span>
<span class="ln">34</span>   <span class="nd">@AfterReturning</span><span class="o">(</span><span class="n">pointcut</span> <span class="o">=</span> <span class="s">&#34;selectGetName()&#34;</span><span class="o">,</span> <span class="n">returning</span> <span class="o">=</span> <span class="s">&#34;retVal&#34;</span><span class="o">)</span>
<span class="ln">35</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterReturningAdvice</span><span class="o">(</span><span class="n">Object</span> <span class="n">retVal</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">36</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;[Success] `afterReturningAdvice()` reads return value: &#34;</span> <span class="o">+</span> <span class="n">retVal</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span> <span class="o">);</span>
<span class="ln">37</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;------&#34;</span><span class="o">);</span>
<span class="ln">38</span>   <span class="o">}</span>
<span class="ln">39</span>
<span class="ln">40</span>   <span class="nd">@AfterThrowing</span><span class="o">(</span><span class="n">pointcut</span> <span class="o">=</span> <span class="s">&#34;selectGetName()&#34;</span><span class="o">,</span> <span class="n">throwing</span> <span class="o">=</span> <span class="s">&#34;exception&#34;</span><span class="o">)</span>
<span class="ln">41</span>   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterThrowingAdvice</span><span class="o">(</span><span class="n">Exception</span> <span class="n">exception</span><span class="o">){</span>
<span class="ln">42</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;[FAILURE] `afterThrowingAdvice()` detects Exception: &#34;</span> <span class="o">+</span> <span class="n">exception</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
<span class="ln">43</span>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;------&#34;</span><span class="o">);</span>
<span class="ln">44</span>   <span class="o">}</span>
<span class="ln">45</span><span class="o">}</span>
</code></pre></div><p><em>Code 6-1-AOP-selectGetName(a)</em> changes <em>pointcut</em> to target only on method <code>Student.getName()</code>.</p>
<p>The expected output for <em>Code 6-1-AOP-selectGetName(a)</em>, <em>Code 6-1(b, c)</em>, and <em>Code 6-2</em> should be:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="ln"> 1</span>`beforeAdvice()` invoked.
<span class="ln"> 2</span>Class method `getName()` gets `name` = Tom
<span class="ln"> 3</span>[Success] `afterReturningAdvice()` reads return value: Tom
<span class="ln"> 4</span>------
<span class="ln"> 5</span>`afterAdvice()` invoked.
<span class="ln"> 6</span>Class method `getAge()` gets `age` = 83
<span class="ln"> 7</span>Class method `throwsException()` will throw &#39;IllegalArgumentException&#39;
<span class="ln"> 8</span>Exception in thread &#34;main&#34; java.lang.IllegalArgumentException
<span class="ln"> 9</span>	at com.example.aop.Student.throwsException(Student.java:24)
<span class="ln">10</span>	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
<span class="ln">11</span>	(Omit the rest message...)
</code></pre></div>
    </div>

    
    <div class="post_updated">
      <hr />
      <div class="update_date_container"> * This blog was last updated on 2023-07-19 00:00 </div>
    </div><div class="post_comments">
  
  
    
<script id="id-loading-utterance-script"
  src="https://utteranc.es/client.js"
  repo="Mighten/Mighten.github.io"
  issue-term="pathname"
  theme = "github-light"

  
  label="blog comments ✨💬✨"
  
  
  crossorigin="anonymous"
  async 
></script>

<script>
    
    
    
    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') {
            return;
        }

        const darkThemeName = "icy-dark"  || "github-dark";
        const lightThemeName = "github-light" || "github-light";
        const currentDataMode = document.documentElement.getAttribute('data-mode');

        
        const message = {
            type: "set-theme",
            theme: currentDataMode == 'dim' ? darkThemeName : lightThemeName,
        };

        const utterances = document.querySelector(".utterances-frame");
        utterances.contentWindow.postMessage(message, "https://utteranc.es");
        console.log(`On page initialized, set utterances theme to '${message.theme}'`);
    });
</script>

<script>
 
document
    .getElementById("mode")
    .addEventListener("click", () => {
        
        const oldTheme = document.documentElement.getAttribute('data-mode');
        let darkThemeName = "icy-dark"  || "github-dark";
        let lightThemeName = "github-light" || "github-light";
        const newTheme = (oldTheme == 'lit') ? darkThemeName : lightThemeName;

        const message = {
            type: "set-theme",
            theme: newTheme,
        };
        const utterances = document.querySelector(".utterances-frame");
        utterances.contentWindow.postMessage(message, "https://utteranc.es");
        console.log(`On site theme changed, change utterances theme to '${message.theme}'`);
    }
);
</script>

<style>
 
.utterances-frame {
    margin-top: 50px;
    position: relative;
}

</style>


  
  
</div>




  </article>
<aside class="sidebar">
  <section class="sidebar_inner">
    <br>
    


    
    
      
	    <h2 class="mt-4">Posts in this series</h2>
      <ul>
        
        <li>
          <a href="https://mighten.github.io/2023/07/spring-framework/" class="nav-link" title="Spring Framework">Spring Framework</a>
        </li>
        
        <li>
          <a href="https://mighten.github.io/2023/03/servlet/" class="nav-link" title="Servlet">Servlet</a>
        </li>
        
      </ul>
    
    <h2 class="mt-4">Recent Posts</h2>
    <ul class="flex-column">
      <li>
        <a href="https://mighten.github.io/2024/05/kia-ch03-pods-running-containers-in-kubernetes/" class="nav-link" title="KIA CH03 Pods: running containers in Kubernetes">KIA CH03 Pods: running containers in Kubernetes</a>
      </li>
      <li>
        <a href="https://mighten.github.io/2024/05/kia-ch02-first-steps-with-docker-and-kubernetes/" class="nav-link" title="KIA CH02 First Steps with Docker and Kubernetes">KIA CH02 First Steps with Docker and Kubernetes</a>
      </li>
      <li>
        <a href="https://mighten.github.io/2024/05/kia-ch01-introducing-kubernetes/" class="nav-link" title="KIA CH01 Introducing Kubernetes">KIA CH01 Introducing Kubernetes</a>
      </li>
      <li>
        <a href="https://mighten.github.io/2023/07/spring-framework/" class="nav-link" title="Spring Framework">Spring Framework</a>
      </li>
      <li>
        <a href="https://mighten.github.io/2023/06/maven/" class="nav-link" title="Maven">Maven</a>
      </li>
      <li>
        <a href="https://mighten.github.io/2023/06/docker/" class="nav-link" title="Docker">Docker</a>
      </li>
      <li>
        <a href="https://mighten.github.io/2023/06/putty-with-openssh/" class="nav-link" title="PuTTY with OpenSSH">PuTTY with OpenSSH</a>
      </li>
      <li>
        <a href="https://mighten.github.io/2023/06/mit-6.033-cse-security/" class="nav-link" title="MIT 6.033 CSE Security">MIT 6.033 CSE Security</a>
      </li>
    </ul>
    <div>
      <h2 class="mt-4 taxonomy" id="series-section">Series</h2>
      <nav class="tags_nav">
        <a href='https://mighten.github.io/series/mit-6.033/' class="post_tag button button_translucent" title="mit-6.033">
          MIT-6.033
          <span class="button_tally">4</span>
        </a>
        
        <a href='https://mighten.github.io/series/k8s-in-action/' class="post_tag button button_translucent" title="k8s-in-action">
          K8S-IN-ACTION
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://mighten.github.io/series/algorithms/' class="post_tag button button_translucent" title="algorithms">
          ALGORITHMS
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://mighten.github.io/series/web/' class="post_tag button button_translucent" title="web">
          WEB
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://mighten.github.io/series/ddia/' class="post_tag button button_translucent" title="ddia">
          DDIA
          <span class="button_tally">1</span>
        </a>
        
        
      </nav>
    </div>
    <div>
      <h2 class="mt-4 taxonomy" id="tags-section">Tags</h2>
      <nav class="tags_nav">
        <a href='https://mighten.github.io/tags/system-design/' class="post_tag button button_translucent" title="system-design">
          SYSTEM-DESIGN
          <span class="button_tally">5</span>
        </a>
        
        <a href='https://mighten.github.io/tags/cloud-native/' class="post_tag button button_translucent" title="cloud-native">
          CLOUD-NATIVE
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://mighten.github.io/tags/devops/' class="post_tag button button_translucent" title="devops">
          DEVOPS
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://mighten.github.io/tags/k8s/' class="post_tag button button_translucent" title="k8s">
          K8S
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://mighten.github.io/tags/kubernetes/' class="post_tag button button_translucent" title="kubernetes">
          KUBERNETES
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://mighten.github.io/tags/algorithm/' class="post_tag button button_translucent" title="algorithm">
          ALGORITHM
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://mighten.github.io/tags/java/' class="post_tag button button_translucent" title="java">
          JAVA
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://mighten.github.io/tags/misc/' class="post_tag button button_translucent" title="misc">
          MISC
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://mighten.github.io/tags/spring/' class="post_tag button button_translucent" title="spring">
          SPRING
          <span class="button_tally">1</span>
        </a>
        
        
      </nav>
    </div>
  </section>
</aside>

  
</div>

<style>
   
  .post_updated .update_date_container {
    font-style: italic;
    color: gray;
  }

</style>
    </main><svg width="0" height="0" class="hidden">
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="facebook">
    <path d="M437 0H75C33.648 0 0 33.648 0 75v362c0 41.352 33.648 75 75 75h151V331h-60v-90h60v-61c0-49.629 40.371-90 90-90h91v90h-91v61h91l-15 90h-76v181h121c41.352 0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zm0 0"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.001 18.001" id="twitter">
    <path d="M15.891 4.013c.808-.496 1.343-1.173 1.605-2.034a8.68 8.68 0 0 1-2.351.861c-.703-.756-1.593-1.14-2.66-1.14-1.043 0-1.924.366-2.643 1.078a3.56 3.56 0 0 0-1.076 2.605c0 .309.039.585.117.819-3.076-.105-5.622-1.381-7.628-3.837-.34.601-.51 1.213-.51 1.846 0 1.301.549 2.332 1.645 3.089-.625-.053-1.176-.211-1.645-.47 0 .929.273 1.705.82 2.388a3.623 3.623 0 0 0 2.115 1.291c-.312.08-.641.118-.979.118-.312 0-.533-.026-.664-.083.23.757.664 1.371 1.291 1.841a3.652 3.652 0 0 0 2.152.743C4.148 14.173 2.625 14.69.902 14.69c-.422 0-.721-.006-.902-.038 1.697 1.102 3.586 1.649 5.676 1.649 2.139 0 4.029-.542 5.674-1.626 1.645-1.078 2.859-2.408 3.639-3.974a10.77 10.77 0 0 0 1.172-4.892v-.468a7.788 7.788 0 0 0 1.84-1.921 8.142 8.142 0 0 1-2.11.593z"
      ></path>
  </symbol>
  <symbol aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="mail">
    <path  d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="calendar">
    <path d="M452 40h-24V0h-40v40H124V0H84v40H60C26.916 40 0 66.916 0 100v352c0 33.084 26.916 60 60 60h392c33.084 0 60-26.916 60-60V100c0-33.084-26.916-60-60-60zm20 412c0 11.028-8.972 20-20 20H60c-11.028 0-20-8.972-20-20V188h432v264zm0-304H40v-48c0-11.028 8.972-20 20-20h24v40h40V80h264v40h40V80h24c11.028 0 20 8.972 20 20v48z"></path>
    <path d="M76 230h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 310h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 390h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80-80h40v40h-40z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="github">
    <path d="M255.968 5.329C114.624 5.329 0 120.401 0 262.353c0 113.536 73.344 209.856 175.104 243.872 12.8 2.368 17.472-5.568 17.472-12.384 0-6.112-.224-22.272-.352-43.712-71.2 15.52-86.24-34.464-86.24-34.464-11.616-29.696-28.416-37.6-28.416-37.6-23.264-15.936 1.728-15.616 1.728-15.616 25.696 1.824 39.2 26.496 39.2 26.496 22.848 39.264 59.936 27.936 74.528 21.344 2.304-16.608 8.928-27.936 16.256-34.368-56.832-6.496-116.608-28.544-116.608-127.008 0-28.064 9.984-51.008 26.368-68.992-2.656-6.496-11.424-32.64 2.496-68 0 0 21.504-6.912 70.4 26.336 20.416-5.696 42.304-8.544 64.096-8.64 21.728.128 43.648 2.944 64.096 8.672 48.864-33.248 70.336-26.336 70.336-26.336 13.952 35.392 5.184 61.504 2.56 68 16.416 17.984 26.304 40.928 26.304 68.992 0 98.72-59.84 120.448-116.864 126.816 9.184 7.936 17.376 23.616 17.376 47.584 0 34.368-.32 62.08-.32 70.496 0 6.88 4.608 14.88 17.6 12.352C438.72 472.145 512 375.857 512 262.353 512 120.401 397.376 5.329 255.968 5.329z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 212 212" id="gitlab">
    <path d="M12.3 74.7h54L43.3 3c-1-3.6-6.4-3.6-7.6 0L12.3 74.8z" />
    <path d="M12.3 74.7L.5 111c-1 3.2 0 6.8 3 8.8l101.6 74-92.5-119z"/>
    <path d="M105 193.7l-38.6-119h-54l92.7 119z"/>
    <path d="M105 193.7l38.7-119H66.4l38.7 119z"/>
    <path d="M105 193.7l38.7-119H198l-93 119z"/>
    <path d="M198 74.7l11.6 36.2c1 3 0 6.6-3 8.6l-101.5 74 93-119z"/>
    <path d="M198 74.7h-54.3L167 3c1.2-3.6 6.4-3.6 7.6 0L198 74.8z"/>
  </symbol>
  <symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="rss">
    <circle cx="3.429" cy="20.571" r="3.429"></circle>
    <path d="M11.429 24h4.57C15.999 15.179 8.821 8.001 0 8v4.572c6.302.001 11.429 5.126 11.429 11.428z"></path>
    <path d="M24 24C24 10.766 13.234 0 0 0v4.571c10.714 0 19.43 8.714 19.43 19.429z"></path>
  </symbol>
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="linkedin">
    <path d="M437 0H75C33.648 0 0 33.648 0 75v362c0 41.352 33.648 75 75 75h362c41.352 0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zM181 406h-60V196h60zm0-240h-60v-60h60zm210 240h-60V286c0-16.54-13.46-30-30-30s-30 13.46-30 30v120h-60V196h60v11.309C286.719 202.422 296.93 196 316 196c40.691.043 75 36.547 75 79.688zm0 0"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612" id="to-top">
    <path d="M604.501 440.509L325.398 134.956c-5.331-5.357-12.423-7.627-19.386-7.27-6.989-.357-14.056 1.913-19.387 7.27L7.499 440.509c-9.999 10.024-9.999 26.298 0 36.323s26.223 10.024 36.222 0l262.293-287.164L568.28 476.832c9.999 10.024 26.222 10.024 36.221 0 9.999-10.023 9.999-26.298 0-36.323z"></path>
  </symbol>
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="carly">
    <path d="M504.971 239.029L448 182.059V84c0-46.317-37.682-84-84-84h-44c-13.255 0-24 10.745-24 24s10.745 24 24 24h44c19.851 0 36 16.149 36 36v108c0 6.365 2.529 12.47 7.029 16.971L454.059 256l-47.029 47.029A24.002 24.002 0 0 0 400 320v108c0 19.851-16.149 36-36 36h-44c-13.255 0-24 10.745-24 24s10.745 24 24 24h44c46.318 0 84-37.683 84-84v-98.059l56.971-56.971c9.372-9.372 9.372-24.568 0-33.941zM112 192V84c0-19.851 16.149-36 36-36h44c13.255 0 24-10.745 24-24S205.255 0 192 0h-44c-46.318 0-84 37.683-84 84v98.059l-56.971 56.97c-9.373 9.373-9.373 24.568 0 33.941L64 329.941V428c0 46.317 37.682 84 84 84h44c13.255 0 24-10.745 24-24s-10.745-24-24-24h-44c-19.851 0-36-16.149-36-36V320c0-6.365-2.529-12.47-7.029-16.971L57.941 256l47.029-47.029A24.002 24.002 0 0 0 112 192z"></path>
  </symbol>
  <symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="copy">
    <path d="M23 2.75A2.75 2.75 0 0 0 20.25 0H8.75A2.75 2.75 0 0 0 6 2.75v13.5A2.75 2.75 0 0 0 8.75 19h11.5A2.75 2.75 0 0 0 23 16.25zM18.25 14.5h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5zm0-3h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5zm0-3h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5z"></path>
    <path d="M8.75 20.5a4.255 4.255 0 0 1-4.25-4.25V2.75c0-.086.02-.166.025-.25H3.75A2.752 2.752 0 0 0 1 5.25v16A2.752 2.752 0 0 0 3.75 24h12a2.752 2.752 0 0 0 2.75-2.75v-.75z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.001 512.001" id="closeme">
    <path d="M284.286 256.002L506.143 34.144c7.811-7.811 7.811-20.475 0-28.285-7.811-7.81-20.475-7.811-28.285 0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285 0-7.81 7.811-7.811 20.475 0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475 0 28.285a19.938 19.938 0 0 0 14.143 5.857 19.94 19.94 0 0 0 14.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475 0-28.285L284.286 256.002z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="open-menu">
    <path d="M492 236H20c-11.046 0-20 8.954-20 20s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20zm0-160H20C8.954 76 0 84.954 0 96s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20zm0 320H20c-11.046 0-20 8.954-20 20s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="instagram">
    <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id=youtube>
    <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="stackoverflow">
    <path d="M21 27v-8h3v11H0V19h3v8h18z"></path><path d="M17.1.2L15 1.8l7.9 10.6 2.1-1.6L17.1.2zm3.7 14.7L10.6 6.4l1.7-2 10.2 8.5-1.7 2zM7.2 12.3l12 5.6 1.1-2.4-12-5.6-1.1 2.4zm-1.8 6.8l13.56 1.96.17-2.38-13.26-2.55-.47 2.97zM19 25H5v-3h14v3z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="xing">
    <path d="M18.188 0c-.517 0-.741.325-.927.66 0 0-7.455 13.224-7.702 13.657.015.024 4.919 9.023 4.919 9.023.17.308.436.66.967.66h3.454c.211 0 .375-.078.463-.22.089-.151.089-.346-.009-.536l-4.879-8.916c-.004-.006-.004-.016 0-.022L22.139.756c.095-.191.097-.387.006-.535C22.056.078 21.894 0 21.686 0h-3.498zM3.648 4.74c-.211 0-.385.074-.473.216-.09.149-.078.339.02.531l2.34 4.05c.004.01.004.016 0 .021L1.86 16.051c-.099.188-.093.381 0 .529.085.142.239.234.45.234h3.461c.518 0 .766-.348.945-.667l3.734-6.609-2.378-4.155c-.172-.315-.434-.659-.962-.659H3.648v.016z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 71 55" id="discord">
    <path d="M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527 0.41542C45.5603 0.39851 45.468 0.440769 45.4204 0.525289C44.7963 1.6353 44.105 3.0834 43.6209 4.2216C38.1637 3.4046 32.7345 3.4046 27.3892 4.2216C26.905 3.0581 26.1886 1.6353 25.5617 0.525289C25.5141 0.443589 25.4218 0.40133 25.3294 0.41542C20.2584 1.2888 15.4057 2.8186 10.8776 4.8978C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795C1.57795 18.7309 -0.943561 32.1443 0.293408 45.3914C0.299005 45.4562 0.335386 45.5182 0.385761 45.5576C6.45866 50.0174 12.3413 52.7249 18.1147 54.5195C18.2071 54.5477 18.305 54.5139 18.3638 54.4378C19.7295 52.5728 20.9469 50.6063 21.9907 48.5383C22.0523 48.4172 21.9935 48.2735 21.8676 48.2256C19.9366 47.4931 18.0979 46.6 16.3292 45.5858C16.1893 45.5041 16.1781 45.304 16.3068 45.2082C16.679 44.9293 17.0513 44.6391 17.4067 44.3461C17.471 44.2926 17.5606 44.2813 17.6362 44.3151C29.2558 49.6202 41.8354 49.6202 53.3179 44.3151C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433C53.9057 44.6363 54.2779 44.9293 54.6529 45.2082C54.7816 45.304 54.7732 45.5041 54.6333 45.5858C52.8646 46.6197 51.0259 47.4931 49.0921 48.2228C48.9662 48.2707 48.9102 48.4172 48.9718 48.5383C50.038 50.6034 51.2554 52.5699 52.5959 54.435C52.6519 54.5139 52.7526 54.5477 52.845 54.5195C58.6464 52.7249 64.529 50.0174 70.6019 45.5576C70.6551 45.5182 70.6887 45.459 70.6943 45.3942C72.1747 30.0791 68.2147 16.7757 60.1968 4.9823C60.1772 4.9429 60.1437 4.9147 60.1045 4.8978ZM23.7259 37.3253C20.2276 37.3253 17.3451 34.1136 17.3451 30.1693C17.3451 26.225 20.1717 23.0133 23.7259 23.0133C27.308 23.0133 30.1626 26.2532 30.1066 30.1693C30.1066 34.1136 27.28 37.3253 23.7259 37.3253ZM47.3178 37.3253C43.8196 37.3253 40.9371 34.1136 40.9371 30.1693C40.9371 26.225 43.7636 23.0133 47.3178 23.0133C50.9 23.0133 53.7545 26.2532 53.6986 30.1693C53.6986 34.1136 50.9 37.3253 47.3178 37.3253Z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 18" id="mastodon">
    <path
    fill="#ffffff"
    d="m 15.054695,9.8859583 c -0.22611,1.1632697 -2.02517,2.4363497 -4.09138,2.6830797 -1.0774504,0.12856 -2.1382704,0.24673 -3.2694704,0.19484 -1.84996,-0.0848 -3.30971,-0.44157 -3.30971,-0.44157 0,0.1801 0.0111,0.35157 0.0333,0.51194 0.24051,1.82571 1.81034,1.93508 3.29737,1.98607 1.50088,0.0514 2.8373104,-0.37004 2.8373104,-0.37004 l 0.0617,1.35686 c 0,0 -1.0498104,0.56374 -2.9199404,0.66742 -1.03124,0.0567 -2.3117,-0.0259 -3.80308,-0.42069 -3.23454998,-0.85613 -3.79081998,-4.304 -3.87592998,-7.8024197 -0.026,-1.03871 -0.01,-2.01815 -0.01,-2.83732 0,-3.57732 2.34385998,-4.62587996 2.34385998,-4.62587996 1.18184,-0.54277 3.20976,-0.77101 5.318,-0.7882499985409 h 0.0518 C 9.8267646,0.01719834 11.856025,0.24547834 13.037775,0.78824834 c 0,0 2.34377,1.04855996 2.34377,4.62587996 0,0 0.0294,2.63937 -0.32687,4.47183"/>
 <path
    fill="#000000"
    d="m 12.616925,5.6916583 v 4.3315297 h -1.71607 V 5.8189683 c 0,-0.88624 -0.37289,-1.33607 -1.1187604,-1.33607 -0.82467,0 -1.23799,0.53361 -1.23799,1.58875 v 2.30122 h -1.70594 v -2.30122 c 0,-1.05514 -0.4134,-1.58875 -1.23808,-1.58875 -0.74587,0 -1.11876,0.44983 -1.11876,1.33607 v 4.2042197 h -1.71607 V 5.6916583 c 0,-0.88527 0.22541,-1.58876 0.67817,-2.10922 0.46689,-0.52047 1.07833,-0.78727 1.83735,-0.78727 0.87816,0 1.54317,0.33752 1.98288,1.01267 l 0.42744,0.71655 0.42753,-0.71655 c 0.43961,-0.67515 1.10463,-1.01267 1.9828704,-1.01267 0.75893,0 1.37037,0.2668 1.83735,0.78727 0.45268,0.52046 0.67808,1.22395 0.67808,2.10922"/>
  </symbol>
</svg>


<footer class="footer">
  <div class="footer_inner wrap pale">
    <img src='https://mighten.github.io/favicon/apple-touch-icon.png' class="icon icon_2 transparent" alt="Mighten Dai">
    <p>Copyright &COPY; &nbsp;2022-<span class="year"></span>,&nbsp;MIGHTEN DAI.<br/> All Rights Reserved.</p><a class="to_top" href="#documentTop">
  <svg class="icon">
  <title>to-top</title>
  <use xlink:href="#to-top"></use>
</svg>

</a>

  </div>
</footer>


<script type="text/javascript" src="https://mighten.github.io/en/js/bundle.bc7fa972211f82bdf996eb19048c902c5fa501892da0cb0c8236be2734482683795affb35d23b3cc109af926b38f8de5f7797aacce4e5073b6a802f47f5dea8e.js" integrity="sha512-vH&#43;pciEfgr35lusZBIyQLF&#43;lAYktoMsMgja&#43;JzRIJoN5Wv&#43;zXSOzzBCa&#43;Sazj43l93l6rM5OUHO2qAL0f13qjg==" crossorigin="anonymous"></script>
  </body>
</html>
